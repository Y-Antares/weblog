<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/7/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-199" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/21/199/" class="article-date">
  <time class="dt-published" datetime="2024-02-20T16:51:30.000Z" itemprop="datePublished">2024-02-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/uncategorized/">uncategorized</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/02/21/199/">Untitled Post - 8</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/02/21/199/" data-id="cm1hr2hp2000sdwuehsp03p4c" data-title="Untitled Post - 8" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-白色绵羊中的黑色绵羊" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/21/%E7%99%BD%E8%89%B2%E7%BB%B5%E7%BE%8A%E4%B8%AD%E7%9A%84%E9%BB%91%E8%89%B2%E7%BB%B5%E7%BE%8A/" class="article-date">
  <time class="dt-published" datetime="2024-02-20T16:48:17.000Z" itemprop="datePublished">2024-02-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AF%BB%E7%BD%A2%E6%9C%89%E6%84%9F/">读罢有感</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/02/21/%E7%99%BD%E8%89%B2%E7%BB%B5%E7%BE%8A%E4%B8%AD%E7%9A%84%E9%BB%91%E8%89%B2%E7%BB%B5%E7%BE%8A/">白色绵羊中的黑色绵羊</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>京东读书专业版可阅读。</p>
</blockquote>
<p>作为一名写作者，你看见了什么？</p>
<h1 id="白色绵羊里的黑色绵羊"><a href="#白色绵羊里的黑色绵羊" class="headerlink" title="白色绵羊里的黑色绵羊"></a>白色绵羊里的黑色绵羊</h1><h1 id="谈小说"><a href="#谈小说" class="headerlink" title="谈小说"></a>谈小说</h1><h2 id="读先于写"><a href="#读先于写" class="headerlink" title="读先于写"></a>读先于写</h2><p><strong>余华</strong>，叙述的高速公路；放下书去写作的冲动。</p>
<blockquote>
<p>想起了所谓同人的“巧合羁绊写作法”。 原文大意是说在同人一类作品当中，逻辑和常理都为羁绊弯腰服务。我擅自加上了手段：“巧合”。</p>
</blockquote>
<p><strong>《水浒传》：</strong></p>
<p>林冲：被命运推着走</p>
<p>动词像一根根骨头一样，使小说有质感，有力量。</p>
<p>武侠；中国社会日常生活</p>
<p><strong>海明威：</strong></p>
<p>站着写作。简练。</p>
<p>“冰山”，你藏起来不是因为你不知道，是因为你知道，才把它藏起来。因为不需要写出来，你所创造的世界才有了一种巨大的空间感，一种确凿的但读者却无法完全可知的底座，这就引起了读者的参与和思考。</p>
<p>“一个东西倘若不是和任何别的东西相依赖而存在，就不能说它真的存在。”</p>
<p>文学史编造的假象</p>
<p>片段速写式的写作。</p>
<p>福克纳，海明威：巴洛克建筑与光秃秃的石碑。</p>
<p>这个想法暗藏在我心里很长时间，一直想要跑出来，直到看到这个小说才找到了钥匙。</p>
<p>少年进入成人世界</p>
<blockquote>
<p>如此便启发我，可在我那《反色时代》中描写“成人进入少年世界”，恰好老爸这个人物原型也现成。</p>
</blockquote>
<p>“招魂”</p>
<h2 id="灵感捕手"><a href="#灵感捕手" class="headerlink" title="灵感捕手"></a>灵感捕手</h2><p>小说无时无刻不在反映过往的积累和现在的想法。</p>
<p>“小说就是我的日记”</p>
<p>没有被看到比没有被承认更可怕，心里有一种感伤。</p>
<blockquote>
<p>这就是我做博客网站的原因。</p>
</blockquote>
<p>一个小说家，他没有选择诗的方式表达自己，他也没有选择用写新闻的方式表达自己，他也没有选择用音乐、用绘画的方式表达，他用一个故事的方式表达自己，就说明这个人某种程度上具备用故事的载体去表达自己的能力，或者说至少是爱故事的，他愿意用故事这种虚构的方式去表达自己，去承揽自己的这些情感，去给出自己的疑问。</p>
<p>小说的开头随意还是精妙，因人而异。</p>
<h2 id="故事之外"><a href="#故事之外" class="headerlink" title="故事之外"></a>故事之外</h2><p>故事本身是载体，其外的氛围等也重要。</p>
<p>短篇小说是世界的比喻句，是一个大的比喻句；而诗是短促的比喻句。</p>
<p>契诃夫《醋栗》</p>
<p>塞林格《为埃斯米而作—既有爱也有污秽凄苦》，春天的暖风</p>
<p>e.g. 直接引语和间接引语的巧妙运用</p>
<p>《跷跷板》：以一种氛围开启，然后在写的过程中慢慢发现每个人物的个性和故事的情节。</p>
<h2 id="小说的引擎"><a href="#小说的引擎" class="headerlink" title="小说的引擎"></a>小说的引擎</h2><p>人物关系</p>
<p>它要制造出一种紧张，好像要有什么事情发生。</p>
<p>相遇</p>
<p>魅力</p>
<h2 id="小说并不模仿生活"><a href="#小说并不模仿生活" class="headerlink" title="小说并不模仿生活"></a>小说并不模仿生活</h2><p>小说这个精神世界和现实世界没有直接的临摹关系。</p>
<p>创造而非记录。</p>
<p>你大概握住这个人物的重要把手后，之后你就尽其所能地写吧。</p>
<p>厄休拉《黑暗的左手》：事实其实是想象的产物。事实能否取信于人，取决于讲述的方式。</p>
<h2 id="人物非人亦非物"><a href="#人物非人亦非物" class="headerlink" title="人物非人亦非物"></a>人物非人亦非物</h2><p>而“我自己”这三个字，本身也很复杂，每个人都有很多个自己，比如你见到父母时的自己和你见到喜欢的人的时候的自己就很不一样，从这个角度说，面对文学时候的“自己”肯定也是很不一样的一个。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/02/21/%E7%99%BD%E8%89%B2%E7%BB%B5%E7%BE%8A%E4%B8%AD%E7%9A%84%E9%BB%91%E8%89%B2%E7%BB%B5%E7%BE%8A/" data-id="cm1hr2hq3006gdwuec81mdw2q" data-title="白色绵羊中的黑色绵羊" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%B9%A6/" rel="tag">书</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-仙人抚我顶" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/21/%E4%BB%99%E4%BA%BA%E6%8A%9A%E6%88%91%E9%A1%B6/" class="article-date">
  <time class="dt-published" datetime="2024-02-20T16:31:03.000Z" itemprop="datePublished">2024-02-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E8%AF%BB%E7%BD%A2%E6%9C%89%E6%84%9F/">读罢有感</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/02/21/%E4%BB%99%E4%BA%BA%E6%8A%9A%E6%88%91%E9%A1%B6/">仙人抚我顶</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>“修仙”是这样的一座桥梁，横亘在过去与未来之间。 其中人物的长寿、异能，更像是把现在的事解释给古人听。 然而其余能力，如御剑飞行，把一些外在的东西内化到人自己身上了，是对未来最简易的祈望。</p>
<p>正如诠释学是语言体系的转换，修仙小说这种类型文学亦是一种转换器。它联古通今，修生复死，</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/02/21/%E4%BB%99%E4%BA%BA%E6%8A%9A%E6%88%91%E9%A1%B6/" data-id="cm1hr2hps0047dwue7gabgoed" data-title="仙人抚我顶" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-归乡" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/21/%E5%BD%92%E4%B9%A1/" class="article-date">
  <time class="dt-published" datetime="2024-02-20T16:29:51.000Z" itemprop="datePublished">2024-02-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/project/">project</a>►<a class="article-category-link" href="/categories/project/%E5%8F%8D%E8%89%B2%E6%97%B6%E4%BB%A3/">反色时代</a>►<a class="article-category-link" href="/categories/%E7%B3%BB%E5%88%97/">系列</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/02/21/%E5%BD%92%E4%B9%A1/">归乡</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>乘载着不同的载具，归乡。新时代的乘汽车等，归得快；旧时代者乘马匹等，归得慢，且需回到更遥远的故乡。所有事物都在奔驰，包括大地，星辰……回到它们最初的原点。 “移步换景”。如进入洗手间，时代倒退五年，事物新颖度退回五年。 人们不知不觉随之倒退，恍惚地窥见未来。 其中敏锐者，或欲正行。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/02/21/%E5%BD%92%E4%B9%A1/" data-id="cm1hr2hpv004wdwuednfg02jv" data-title="归乡" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-如梦幻泡影，如露亦如电" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/21/%E5%A6%82%E6%A2%A6%E5%B9%BB%E6%B3%A1%E5%BD%B1%EF%BC%8C%E5%A6%82%E9%9C%B2%E4%BA%A6%E5%A6%82%E7%94%B5/" class="article-date">
  <time class="dt-published" datetime="2024-02-20T16:20:34.000Z" itemprop="datePublished">2024-02-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/02/21/%E5%A6%82%E6%A2%A6%E5%B9%BB%E6%B3%A1%E5%BD%B1%EF%BC%8C%E5%A6%82%E9%9C%B2%E4%BA%A6%E5%A6%82%E7%94%B5/">如梦幻泡影，如露亦如电</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>本篇推荐bgm：The Planets, Op. 32:4. Jupiter, the Bringer of Joy (霍尔斯特：行星组曲）</p>
<blockquote>
<p>纵然有愧，其行无亏。 此文亦可追溯至高中文，《似有大悲之意》，因无合适的题目提供机会而并未写出。 但借助考试作文契机临摹无形之物本就是无奈和愚钝之举。倒不如求知于实践与书籍。 如Oscar Wilde所言：”Art is quite useless.”</p>
</blockquote>
<p>每当读完一本书、看完一部电影或是完整欣赏过其他形式的艺术作品后，一种难言而强壮的悲怆感便涌上心头。仿佛一位旧友的故事就此终结，而回忆尽头的你除随波逐流、脱离梦境外别无选择。这类情绪体验在马斯洛的体系中被称为“高峰体验”，在现代理论中被称为“心流”。简而言之，这是一段短暂的自我实现。</p>
<p>它短暂、可贵，飘忽难定。但这也许是可被掌控的。</p>
<p>出于此状态的人充满创造力。《群山之声响彻寰宇》是典型的无外因“心流”产物。</p>
<p>而有外因的心流好比登山过程。阅读即是山路上的艰难险阻，瞬感即是</p>
<hr>
<p><strong>附</strong>：23.6.22所记</p>
<p>误差是一切所谓悲剧的起源。我脑中划过的一道闪电，表述出来需费如此多额外的精力！本可用来思考的神经，就这样耗在遣词造句上。 必需发展脑科学。 我们之间的隔阂不只是诗意化的描述。</p>
<p>这不代表你应否认未来的可贵。 你不应因未来的可贵而否认现在……它可能不会在未来再发生，尽管未来满是可能性。</p>
<p>我是个挖星星的人……不断把这些思想从地底挖出，为它的光辉痴迷刹那，它便飞往星空……此后我鲜少有喘息窥天之机，星星也在未来的我眼中模糊暗淡……是否能挖到星星也取决于偶然……</p>
<p>正因近地悬浮的轻舟没有载荷，才走的那样顺畅，走的那样远……可是如果想突破，记忆这种累赘是必须的吗？除非足够快，一下冲得足够远……我的轻舟就能一瞬间达到时间累成的高塔的效果。</p>
<p>这样的随机会让我觉得我是自由的。也没有画地为牢地局限自己。真是矛盾。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/02/21/%E5%A6%82%E6%A2%A6%E5%B9%BB%E6%B3%A1%E5%BD%B1%EF%BC%8C%E5%A6%82%E9%9C%B2%E4%BA%A6%E5%A6%82%E7%94%B5/" data-id="cm1hr2hpt004gdwue95jze1u1" data-title="如梦幻泡影，如露亦如电" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%BF%9C%E7%BB%AA/" rel="tag">远绪</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-戴锦华：历史与人民的回忆" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/05/%E6%88%B4%E9%94%A6%E5%8D%8E%EF%BC%9A%E5%8E%86%E5%8F%B2%E4%B8%8E%E4%BA%BA%E6%B0%91%E7%9A%84%E5%9B%9E%E5%BF%86/" class="article-date">
  <time class="dt-published" datetime="2024-02-05T14:53:53.000Z" itemprop="datePublished">2024-02-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/uncategorized/">uncategorized</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/02/05/%E6%88%B4%E9%94%A6%E5%8D%8E%EF%BC%9A%E5%8E%86%E5%8F%B2%E4%B8%8E%E4%BA%BA%E6%B0%91%E7%9A%84%E5%9B%9E%E5%BF%86/">戴锦华：历史与人民的回忆</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <blockquote>
<p>summary 人民消失于影视之中。</p>
</blockquote>
<h2 id="历史-人民-记忆"><a href="#历史-人民-记忆" class="headerlink" title="历史 人民 记忆"></a>历史 人民 记忆</h2><p>投眼于未来，对现实失望，对是否有未来怀疑？</p>
<p>难道不是人类历史上第一次现代技术，从数码转型到生物学革命，我们正第一次问鼎死亡吗？不是第一次人类在尝试战胜死亡吗？</p>
<p>因为伴随技术革命而来的是前所未有的环境危机和能源危机，共享的美好世界不能达成了。</p>
<p>那么当带着危机意识去展望未来时，历史的作用前所未有地显现。</p>
<p>因为没有什么是凭空产生的，没有什么未来是会从虚无中降临的。它永远是昨日、历史的一个必然的延申。</p>
<p>大历史“文明观”—历史概念：伴随着帝国主义、殖民主义的全球战略产生。</p>
<p>文明观本身是一种等级观。文明观建立了一种用似乎时间的表达来规划空间的想象。</p>
<p>今讲具体的历史。20世纪的历史。</p>
<p>20世纪的中国：蜕变、畸变、血与火。</p>
<p>郭沫若《凤凰涅槃》：焚烧，投身火中，化为灰烬，重生飞起。</p>
<p>然而每一次我们烈火焚身的时候，我们并不知道，我们能不能重生。我们也并不知，在灰烬中重生的，会是一只凤凰，还是一个恐怖的幽灵。</p>
<p>20世纪的世界：世界大战把全球化的事实显影出来了。</p>
<p>奥斯维辛、广岛、南京。惨烈，乌托邦的沉沦。信仰碎裂。</p>
<p>冷战。世界一分为二。</p>
<p>胜者是主导了世界的欧美的自由资本主义，败者是东方阵营，社会主义阵营？</p>
<p>施隆道夫：胜者是自由市场，是资本；败者是全球人民！</p>
<p>苏联之死代表几百年来人类别样的理想，实现公平正义的社会实验的全面失败。</p>
<p>短暂的20世纪。</p>
<p>“世纪末”：19世纪末，然而很多内容在20世纪初发生—19世纪的结构延伸到20世纪的开端。</p>
<p>20世纪的结束：20c90s，冷战终结了。</p>
<p>军事对抗终结了，理想实验失败了，我们都置身于这个整体胜利或者大失败的历史回旋当中。</p>
<p>哥伦布发现新大陆后，全球处于互动当中，无任一国家的解释可自封于国境线内。</p>
<p>以现代资本主义的逻辑，鸦片战争是野蛮对文明的征服、弱智对强者的征服。</p>
<p>而_我在想，如今的孩子们沉浸在游戏、追星、短视频当中，也是野蛮对文明的征服后果之一吗？_</p>
<p>20世纪的中国经历了世界历史上所有样式的革命。</p>
<p>革命是摧毁后重建。革命不是改良，革命不是延续，革命不是温和的变革，革命是暴力的，革命是极端的。</p>
<p>“大时代”</p>
<p>“中国道路论”。戴认为，这与我们20世纪的这一次熔毁紧密联系。</p>
<p>人民，people。</p>
<p>公民&lt;人口</p>
<p>中国，城乡二元制：农民不享有公民权。</p>
<p>美国：公民权以大于公民数的人口基数为基础实施。美国国土上的第三世界。</p>
<p>人民是一个历史概念。不是对多数人的正面称呼。</p>
<p>人民因履行历史主体和国家主人的权利而存在。是关于一种政治想象，政治实现，关于这个国家的多数在这个国家的政治结构中所处的地位。对应着政治参与和政治权力。</p>
<p>“人民”的概念连接着劳动者、生产者。</p>
<p>那么在影视中劳动、生产如何蒸发了？</p>
<p>如果大家从事的都是非物质劳动、非物质生产，那么物质从哪里来？还有没有人在土地上耕作？</p>
<p>20世纪颠覆了包含劳动生产的“人民”概念。</p>
<p>福柯：</p>
<p>二战后~20c70s，拍法西斯的电影塑造的纳粹形象：极佳的人文修养+心理疾患（性变态）</p>
<p>纳粹法西斯主义的性爱化是回避两次世界大战是资本主义内部矛盾无法回避的结果。将其转移为某种浪漫的而残忍的事实。</p>
<p>福柯认为，这描绘的不是记忆，而是历史。历史书写的意义在于阻断、抹去、改写人民的记忆。</p>
<p>历史不是真实，历史不是真理，历史从来不是客观真实的记述，历史是什么？历史是胜利者的清单。</p>
<p><strong>所有历史都是当代史。</strong></p>
<p><em>这和我“用当下、个人的话语体系来囊括其他”的观点一致。</em></p>
<p>经历历史的自我感知。</p>
<p>历史涂抹记忆的过程是多么剧烈，多么有效。</p>
<p>“父母能够津津有味讲出的版本完全吻合于主流叙事的版本。”</p>
<p>电影作为大众文化、文化工业，当然它是在历史这一边的。</p>
<p>那么∵20世纪的中国经历了世界历史上所有样式的革命</p>
<p>∴我们拥有不同的胜利者为不同的政治需要写下的历史文本。</p>
<p>这些交织的文本能帮助我们倾听众声喧哗之下的窃窃私语。</p>
<p>E.P. Tomthon — 历史是倾听无声处的声音。</p>
<p><em>看到这时我突然感受到S.忒修斯之船的魅力所在了。从繁杂隐晦的信息中挖掘“真实”的历史（真相）。</em></p>
<h2 id="电影"><a href="#电影" class="headerlink" title="电影"></a>电影</h2><p>不愿被绑在“学科战车”上的人。</p>
<p>人文社科：通过多种媒介去触摸真实。</p>
<h3 id="英雄和人民"><a href="#英雄和人民" class="headerlink" title="英雄和人民"></a>英雄和人民</h3><p>我们怎样地在一个连续的历史当中自我断裂。</p>
<p>《白毛女》《红高粱》《董存瑞》</p>
<p>今天的底层，我们的工农兵，曾是绝对的主角，因为他们是人类历史的发动机和动力。</p>
<p>今天历史书写的策略之一是以历史考据和历史真实和客观为名，去重新改写和操控那段历史。比如董存瑞到底有没有喊：“为了新中国前进！”</p>
<p>董存瑞是英雄，也是人民。</p>
<p>包含了一个真实的成长（接受现代文化教育、阶级启蒙）故事。</p>
<p>阶级意识：当你第一次把自己和更广大的人群、历史的进程联系在一起，你成为了人民中的一员。成为了英雄。（历史唯物主义）</p>
<p>国际主义：我们如何冲破自己的皮囊。</p>
<p>中国电影：英雄成长的故事。</p>
<p>背叛：背叛自己的阶层，自己的利益集团。</p>
<p>生物趋利避害，人性舍生取义。</p>
<p>今天是极端利己主义合法化的年代。但在那个年代，纯粹的利他是广存的。</p>
<p>今天我们用“人性”来解释很多社会性问题，但我们实际使用的是“动物性”。人之所以区别于动物，正是因为那些超越性价值的存在。</p>
<p>“那个”社会实验并不必然失败；但胜利者们把它记载为必然失败。</p>
<h3 id="干群关系"><a href="#干群关系" class="headerlink" title="干群关系"></a>干群关系</h3><p>党和人民的关系。革命党→执政党，有连续和断代。</p>
<p>拯救者和被拯救者。</p>
<p>政治断代化：越来越教条的单一想象—共产党作为启蒙者、救助者，成为了描述历史、想象历史的参数。但党和人民互为历史主体，互为拯救者。大地之母的儿子：当他脱离大地，他就什么都不是。</p>
<p>电视剧红旗谱：红色经典的重拍怎样构成一个内在的反转和颠覆。埋葬式。</p>
<p>“颠倒颠倒的历史观的历史观”</p>
<p>人特殊的生命经验造就他如今的气场。“有机知识分子”</p>
<p>人民试图把握自己的命运，进而试图把握历史和创造历史的故事。</p>
<p>1970，尼克松访华。</p>
<p>改革开放</p>
<p>80年代：最重要的十年，承接50-70的某些特征，但终如破堤之水冲破了旧结构。</p>
<p>《黄土地》：共产党宣传片vs反共电影？</p>
<p>“爱上外来者”：一个全新的世界，全新的希望</p>
<p>庄稼人的规矩—宗族社会的规矩+公家人的规矩—共产党军人的规矩。</p>
<p>没吃没喝唱欢乐vs有吃有喝写烦恼。</p>
<p>Structure of feeling，情感结构。</p>
<p>罗中立的父亲。</p>
<p>“但是他无从改变的是这个世界的结构。”</p>
<p>激越而空洞的革命歌。</p>
<p>与历史无关的主人公突然连接上了历史（通过民族、国家）</p>
<p>自此人民的形象消失于电影之中，取而代之的是某种修辞，比如“小资”，比如“80后”，“90后”。</p>
<p>90年代以来，各种各样的阶层，各种各样的社会群体开始盗用“多数”的名义。他们最真实的身份是消费者。他们盗用了社会主体的位置。</p>
<p>曾经的社会主体，劳动者，生产者隐入了艺术电影之中。然而艺术电影频被批是“反电影”的。且其中多数是三产。</p>
<p>《钢的琴》仍然是物质的非物质生产。</p>
<p>皮克提：随着20世纪的结束，我们正快速地倒归回19世纪。20世纪初资本主义打开的那个上升到阶梯如今关闭了。（阶级分化再加剧）</p>
<p>如果我们要拥有一个共同的名字去应对资本的剥夺，</p>
<p>拒绝偿还债务而启动遗产</p>
<p>中国电影的一个序列形象：今天的底层，大众，民众，当年叫人民，叫阶级，叫历史的主人公，叫国家的主人公，叫创造世界历史的动力。</p>
<p>不是个人的才能，而是资源的分配。</p>
<p>工作服原理：“你一穿上工作服，你就隐形了。”被视为空间和环境的因素。你的阶级已被标明在你的外表。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/02/05/%E6%88%B4%E9%94%A6%E5%8D%8E%EF%BC%9A%E5%8E%86%E5%8F%B2%E4%B8%8E%E4%BA%BA%E6%B0%91%E7%9A%84%E5%9B%9E%E5%BF%86/" data-id="cm1hr2hpx0057dwue1dyvfa0l" data-title="戴锦华：历史与人民的回忆" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%BA%E6%96%87/" rel="tag">人文</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E4%BA%BA%E6%B0%91/" rel="tag">人民</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BD%91%E8%AF%BE/" rel="tag">网课</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-第十二讲-文件" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/05/%E7%AC%AC%E5%8D%81%E4%BA%8C%E8%AE%B2-%E6%96%87%E4%BB%B6/" class="article-date">
  <time class="dt-published" datetime="2024-02-05T10:45:27.000Z" itemprop="datePublished">2024-02-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/notebook/">notebook</a>►<a class="article-category-link" href="/categories/notebook/C-C/">C/C++</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/02/05/%E7%AC%AC%E5%8D%81%E4%BA%8C%E8%AE%B2-%E6%96%87%E4%BB%B6/">第十二讲 文件</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="12-1-文件的概述"><a href="#12-1-文件的概述" class="headerlink" title="12.1 文件的概述"></a>12.1 文件的概述</h2><ul>
<li><p>标准输入输出</p>
<ul>
<li>受限于数据类型，处理数据数量有限，程序结束不保存计算结果。</li>
</ul>
</li>
<li><p>文件输入输出</p>
<ul>
<li>可以处理大批量数据，长久地保存计算结果。</li>
</ul>
</li>
</ul>
<h3 id="文件概述"><a href="#文件概述" class="headerlink" title="文件概述"></a>文件概述</h3><ul>
<li><p>文件是存储在<strong>外存</strong>（如磁盘）上的数据集合。</p>
</li>
<li><p>每个文件通过<strong>唯一的文件名</strong>来标识。</p>
<ul>
<li><p>文件路径：指明文件在外存中位置</p>
</li>
<li><p>主文件名：遵循标识符命名规则</p>
</li>
<li><p>文件后缀（扩展名）：表示文件性质</p>
</li>
</ul>
<p>e.g.<code>D:\\document\\codes.txt</code></p>
</li>
<li><p>计算机按文件名对文件进行读写等操作。</p>
</li>
<li><p>文件按<strong>数据存储形式</strong>分类</p>
<ul>
<li><p>文本文件（ASCII文件）</p>
</li>
<li><p>把内存中数据转换为ASCII码，每个字符用一个ASCII码存储。</p>
</li>
<li><p>二进制文件</p>
</li>
<li><p>把内存中数据按其内存中存储形式不进行格式转换直接存放在文件上。</p>
</li>
</ul>
<p>例：整数123在内存占4个字节，其二进制文件也占4个字节，文本文件占3个字节。</p>
<p>​ 二进制文件因为与字符没有直接的对应关系，所以不能直接编辑和显示。</p>
<p>​ 故一般字符型数据以文本文件形式存储。而数值型数据视情况而定，二进制形式比较方便。</p>
</li>
<li><p>文件存取方式</p>
<ul>
<li>顺序存取</li>
<li>每当打开文件进行读、写操作时，总是从 文件的开头开始，从头到尾顺序地读写。</li>
<li>随机存取</li>
<li>可以通过调用C语言的库函数去指定开始读写的字节号，然后直接对此位置上的数据进行读写操作。</li>
</ul>
</li>
<li><p>C语言文件操作步骤</p>
<ul>
<li>定义文件类型指针</li>
<li><code>FILE *文件指针变量</code></li>
<li>打开文件</li>
<li>调用<code>fopen</code>函数</li>
<li>文件读写</li>
<li>调用读写函数：<ul>
<li><code>fgetc, fputc</code></li>
<li><code>fgets, fputs</code></li>
<li><code>fread, fwrite</code></li>
<li><code>fscanf, fprintf</code></li>
</ul>
</li>
<li>关闭文件</li>
<li>调用<code>fclose</code>函数</li>
</ul>
</li>
<li><p>对文件的处理通过调用标准的输入输出库函数实现。</p>
</li>
<li><p>文件操作一般采用：缓冲文件系统“的方式。</p>
<p><img src="/img/image-20231130092504128.png" alt="image-20231130092504128"></p>
</li>
<li><p>C语言文件处理的关键是定义一个<strong>文件指针</strong>，通过该指针对文件进行打开、读写、关闭等操作。</p>
<ul>
<li>定义：<code>FILE *文件指针标识符;</code></li>
</ul>
<p>如：<code>FILE *fp1,fp2;</code></p>
<ul>
<li>FILE是结构体变量，存放每一个被打开文件的有关信息（如缓冲区的状态、大小，文件当前位置等）。使用FILE类型，需包含<code>stdio.h</code>文件。</li>
</ul>
</li>
</ul>
<h2 id="12-2-文件的打开和关闭"><a href="#12-2-文件的打开和关闭" class="headerlink" title="12.2 文件的打开和关闭"></a>12.2 文件的打开和关闭</h2><p>实质：建立&#x2F;撤销文件信息区和文件缓冲区</p>
<h3 id="文件的打开：fopen"><a href="#文件的打开：fopen" class="headerlink" title="文件的打开：fopen"></a>文件的打开：fopen</h3><ul>
<li>函数原型：</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">FILE *fopen(char *fname,char *mode)</span><br></pre></td></tr></table></figure>

<ul>
<li>功能：<ul>
<li>按照mode规定的方式，打开由fname指定的文件。</li>
</ul>
</li>
<li>参数：<ul>
<li><strong>fname</strong>：字符指针，指向要打开或建立的文件名字符串；</li>
<li><strong>mode</strong>：字符指针，指向文件处理方式字符串。</li>
</ul>
</li>
<li>返回值：<ul>
<li>正常返回：被打开的文件的 文件指针；</li>
<li>异常返回：NULL，表示打开操作不成功。</li>
</ul>
</li>
</ul>
<h4 id="c2022：fopen-s"><a href="#c2022：fopen-s" class="headerlink" title="c2022：fopen_s"></a>c2022：fopen_s</h4><p>使用方法如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//打开文件</span></span><br><span class="line">FILE *fp;</span><br><span class="line"><span class="type">errno_t</span> err = <span class="built_in">fopen_s</span>( &amp;fp, <span class="string">&quot;D:\\users.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br></pre></td></tr></table></figure>

<h4 id="文件的打开方式：mode"><a href="#文件的打开方式：mode" class="headerlink" title="文件的打开方式：mode"></a>文件的打开方式：mode</h4><blockquote>
<p>有”r”, “w”, “a”, “+”, “b”, “t”六种模式选择符号。</p>
<p>r—-read</p>
<p>w—-write</p>
<p>a—-append</p>
<p>t—-text（默认）</p>
<p>b—-binary</p>
<p>+—-read+write</p>
</blockquote>
<p>mode</p>
<p>r</p>
<p>以<strong>只读</strong>方式打开文件，该文件必须存在。</p>
<p>w</p>
<p>打开<strong>只写</strong>文件，若文件存在则清除内容，若不存在则创建该文件。</p>
<p>a</p>
<p>以<strong>追加</strong>方式打开<strong>只写</strong>文件。若文件不存在，则会建立该文件；若文件存在，写入的数据会被追加到文件尾后。</p>
<p>r+</p>
<p>以<strong>读&#x2F;写</strong>方式打开文件，该文件必须存在。</p>
<p>w+</p>
<p>打开<strong>可读&#x2F;写</strong>文件，若文件存在则清除内容，若文件不存在则建立该文件。</p>
<p>a+</p>
<p>以<strong>追加</strong>方式打开<strong>可读&#x2F;写</strong>文件，若文件不存在，则会建立该文件；若文件存在，写入的数据会被追加到文件尾后。</p>
<p>rb</p>
<p>以<strong>只读</strong>方式打开一个<strong>二进制文件</strong>，只允许读数据。</p>
<p>wb</p>
<p>以<strong>只写</strong>方式打开或新建一个<strong>二进制文件</strong>，只允许写数据。</p>
<p>ab</p>
<p><strong>追加</strong>打开一个<strong>二进制文件</strong>，并在文件末尾写数据。</p>
<p>rb+</p>
<p>以<strong>读&#x2F;写</strong>方式打开<strong>二进制文件</strong>，该文件必须存在。</p>
<p>wb+</p>
<p>以<strong>读&#x2F;写</strong>方式打开或建立一个<strong>二进制文件</strong>，允许读和写。</p>
<p>ab+</p>
<p>以<strong>读&#x2F;写</strong>方式打开一个二进制文件，允许读或在文件末追加数据。</p>
<p>说明：<strong>t</strong>表示打开<strong>文本文件</strong>，如果不加<strong>b（二进制文件）</strong>，表示默认加了t。</p>
<ul>
<li><p>为了程序的通用性，文件名可在程序运行时输入，如：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">FILE *fp;</span><br><span class="line"><span class="type">char</span> fname[<span class="number">15</span>];</span><br><span class="line">cout&lt;&lt;<span class="string">&quot;Input filename:\n&quot;</span>;</span><br><span class="line">cin&gt;&gt;fname;</span><br><span class="line">fp=<span class="built_in">fopen</span>(fname,<span class="string">&quot;r&quot;</span>);</span><br></pre></td></tr></table></figure>

<p><strong>注意：</strong></p>
<p>在fopen函数中，若文件名直接给出，路径中的<code>\</code>应写成<code>\\</code>;</p>
<p><code>fp=fopen(&quot;D:\\Doc\\codes.txt&quot;,&quot;a&quot;);</code></p>
<p>若文件名在程序运行时输入（如上例），则路径中的分隔符直接输入字符<code>\</code>。</p>
<p>(input) <code>D:\Doc\codes.txt</code></p>
</li>
<li><p>为保证程序正常运行，需对fopen函数的返回值进行检验，以判断文件是否成功打开，形式如下：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> ((fp=<span class="built_in">fopen</span>(fname,mode))==<span class="literal">NULL</span>)</span><br><span class="line">&#123;</span><br><span class="line">  cout&lt;&lt;<span class="string">&quot;can&#x27;t open file\n&quot;</span>;</span><br><span class="line">  <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（该段程序需要头文件stdlib.h）</p>
</li>
</ul>
<h3 id="文件的关闭"><a href="#文件的关闭" class="headerlink" title="文件的关闭"></a>文件的关闭</h3><ul>
<li>函数原型：<ul>
<li><code>int fclose(FILE *fp)</code></li>
</ul>
</li>
<li>功能：<ul>
<li>关闭fp所指的文件，释放fp所指的文件类型结构体变量。</li>
</ul>
</li>
<li>参数：<ul>
<li>fp：一个已打开文件的文件指针。</li>
</ul>
</li>
<li>返回值：<ul>
<li>正常返回：0；</li>
<li>异常返回：<code>EOF(-1)</code>，表示文件在关闭时发生错误。</li>
</ul>
</li>
</ul>
<p>应养成及时关闭文件的习惯，防止误操作或其他原因丢失数据。</p>
<p>判断</p>
<h2 id="12-3-文件的读写"><a href="#12-3-文件的读写" class="headerlink" title="12.3 文件的读写"></a>12.3 文件的读写</h2><blockquote>
<p>顺序读写：按照数据在文件中的存储顺序读写文件，容易但效率不高；</p>
<p>随机读写：反之，对任意位置的数据读写、访问。</p>
</blockquote>
<h3 id="顺序读写"><a href="#顺序读写" class="headerlink" title="顺序读写"></a>顺序读写</h3><ul>
<li><p>C语言提供四种顺序读写函数：</p>
<p>字符读写、字符串读写、格式读写和数据块读写。</p>
</li>
</ul>
<p>函数</p>
<p>功能</p>
<p>函数</p>
<p>功能</p>
<p>fputc</p>
<p>向文件<strong>写入字符</strong></p>
<p>fputs</p>
<p>向文件<strong>写入字符串</strong></p>
<p>gfetc</p>
<p>从文件<strong>读取字符</strong></p>
<p>fgets</p>
<p>从文件<strong>读取字符串</strong></p>
<p>fwritec</p>
<p>向文件<strong>写入数据块</strong></p>
<p>fprintf</p>
<p>向文件<strong>格式化写入数据块</strong></p>
<p>fread</p>
<p>从文件<strong>读取数据块</strong></p>
<p>fscanf</p>
<p>从文件<strong>格式化读取数据块</strong></p>
<h4 id="从文件读取字符：fgetc"><a href="#从文件读取字符：fgetc" class="headerlink" title="从文件读取字符：fgetc"></a>从文件读取字符：fgetc</h4><ul>
<li><p>函数原型</p>
<ul>
<li><code>int fgetc(FILE *fp)</code></li>
</ul>
</li>
<li><p>功能：</p>
<ul>
<li>从fp所指文件中读取一个字符，并使文件指针后移一个字符位置。</li>
</ul>
</li>
<li><p>参数：</p>
<ul>
<li>fp：文件指针，指向要从中读取字符的文件。</li>
</ul>
</li>
<li><p>返回值：</p>
<ul>
<li>正常返回：读取的字符；</li>
<li>异常返回：EOF(-1)。</li>
</ul>
</li>
<li><p>返回类型的说明：用于区分有效数据和输入的结束（EOF）</p>
<ul>
<li>若返回类型为char：内存中都是一个字节（无法区分）</li>
<li>EOF：0xFF</li>
<li>数据：0xFF</li>
<li>若返回类型为int：四个字节（正确区分）</li>
<li>EOF: 0xFFFFFFFF</li>
<li>数据:0x000000XX</li>
<li>所以将fgetc函数的返回定义为int类型。</li>
</ul>
</li>
</ul>
<h4 id="文件结束测试函数：feof"><a href="#文件结束测试函数：feof" class="headerlink" title="文件结束测试函数：feof"></a>文件结束测试函数：feof</h4><ul>
<li>函数原型：<code>int feof(FILE *fp)</code></li>
<li>功能：判断文件是否结束；</li>
<li>参数：fp:文件指针；</li>
<li>返回值：<ul>
<li>0：假植，表示文件未结束。</li>
<li>1：真值，表示文件结束。</li>
</ul>
</li>
</ul>
<p>例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span>(!<span class="built_in">feof</span>(fp))</span><br><span class="line">&#123;</span><br><span class="line">    ch=<span class="built_in">fgetc</span>(fp);</span><br><span class="line">    <span class="built_in">putchar</span>(ch);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//不想输出-1的话：</span></span><br><span class="line"><span class="keyword">while</span>(<span class="number">1</span>)</span><br><span class="line">&#123;</span><br><span class="line">    ch=<span class="built_in">fgetc</span>(fp);</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">feof</span>(fp)==<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="built_in">putchar</span>(ch);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="向文件写入字符：fputc"><a href="#向文件写入字符：fputc" class="headerlink" title="向文件写入字符：fputc"></a>向文件写入字符：fputc</h4><ul>
<li>函数原型：<code>int fputc(int ch,FILE *fp)</code></li>
<li>功能：把ch中的字符写入fp所指的文件当前位置处，并使文件指针后移一个字符位置。</li>
<li>参数：<ul>
<li>ch：整型变量，内存要写到文件中的字符。</li>
<li>fp：文件指针，指向要在其中写入字符的文件。</li>
</ul>
</li>
<li>返回值：<ul>
<li>正常：写入的字符。</li>
<li>异常：EOF(-1)。</li>
</ul>
</li>
</ul>
<p><strong>例1</strong></p>
<p>编程将文件file1.txt的内容显示在屏幕上，同时将该文件中的数字字符复制到文件file2.txt中。</p>
<p><strong>分析：</strong></p>
<p>实现：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FILE *fp1,fp2;</span><br><span class="line">    <span class="type">char</span> ch;</span><br><span class="line">    fp1=<span class="built_in">fopen</span>(<span class="string">&quot;c:\\file1.txt&quot;</span>,<span class="string">&quot;r&quot;</span>);<span class="comment">//只读方式打开file1</span></span><br><span class="line">    <span class="keyword">if</span>(fp1==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;fail to open file1.txt&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>((fp2=<span class="built_in">fopen</span>(<span class="string">&quot;c:\\file2.txt&quot;</span>,<span class="string">&quot;w&quot;</span>))==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;fail to open file2.txt&quot;</span>;</span><br><span class="line">        <span class="built_in">fclose</span>(fp1);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!<span class="built_in">feof</span>(fp1))</span><br><span class="line">    &#123;</span><br><span class="line">        ch=<span class="built_in">fgetc</span>(fp1);</span><br><span class="line">        <span class="built_in">putchar</span>(ch);<span class="comment">//文件内容读到内存后显示在屏幕上</span></span><br><span class="line">        <span class="keyword">if</span>(ch&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;ch&lt;=<span class="string">&#x27;9&#x27;</span>)</span><br><span class="line">            <span class="built_in">fputc</span>(ch,fp2);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(fp1);<span class="built_in">fclose</span>(fp2); </span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="向文件写入字符串：fputs"><a href="#向文件写入字符串：fputs" class="headerlink" title="向文件写入字符串：fputs"></a>向文件写入字符串：fputs</h4><ul>
<li><p>函数原型：<code>int fputs(char *str,FILE *fp)</code></p>
</li>
<li><p>功能：将str指向的字符串的内容输入到fp所指文件的当前位置，同时将fp自动向前移动strlen(str)个字符位置。</p>
</li>
<li><p>参数：</p>
<ul>
<li>str: 字符串常量&#x2F;字符串指针&#x2F;字符数组名等。</li>
<li>fp: 文件指针，指向要被写入的文件。</li>
</ul>
</li>
<li><p>返回值：</p>
<ul>
<li>正常：非负整数。</li>
<li>异常：EOF(-1)。</li>
</ul>
<p>说明：</p>
<ol>
<li>字符串结束符<code>\0</code>不输入到文件；</li>
<li>不自动在字符串末尾加换行符。</li>
<li><code>fputs</code>自带换行。</li>
</ol>
</li>
</ul>
<h4 id="从文件读取字符串：fgets"><a href="#从文件读取字符串：fgets" class="headerlink" title="从文件读取字符串：fgets"></a>从文件读取字符串：fgets</h4><ul>
<li><p>函数原型：<code>int fgets(char *str,int n,FILE *fp)</code></p>
</li>
<li><p>功能：从由fp指出的文件中读取<strong>n-1个</strong>字符，并把它们存放到由str指出的字符数组中，最后自动加上<code>\0</code>。</p>
</li>
<li><p>参数：</p>
<ul>
<li>str: 接受字符串的内存地址，可以是数组名或指针。</li>
<li>n：要读取字符的个数</li>
<li>fp: 文件指针，指向要被读取字符的文件。</li>
</ul>
</li>
<li><p>返回值：</p>
<ul>
<li>正常：字符串的内存首地址（str的值）。</li>
<li>异常：NULL。</li>
</ul>
<p>说明：</p>
<ol>
<li>读入n-1个字符到文件时，遇到换行符或文件结束符则提前结束；</li>
<li>读入结束后，系统自动加<code>\0</code></li>
</ol>
</li>
</ul>
<p><strong>例2</strong> 字符串读写函数示例</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="type">char</span> s[<span class="number">100</span>];</span><br><span class="line">    <span class="keyword">if</span>((fp=<span class="built_in">fopen</span>(<span class="string">&quot;file1.txt&quot;</span>,<span class="string">&quot;w&quot;</span>))==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;can&#x27;t open file1!\n&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;I am a teacher.&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fputs</span>(<span class="string">&quot;I love my homeland!&quot;</span>,fp);</span><br><span class="line">    <span class="built_in">fclose</span>(fp);<span class="comment">//必须先关闭，再以只读的方式打开。</span></span><br><span class="line">    <span class="keyword">if</span>((fp=<span class="built_in">fopen</span>(<span class="string">&quot;file1.txt&quot;</span>,<span class="string">&quot;r&quot;</span>))==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;can&#x27;t open file1!\n&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(!<span class="built_in">feof</span>(fp))<span class="comment">//指针指到的地方没结束的话</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fgets</span>(s,<span class="number">16</span>,fp);<span class="comment">//每次读取15个字符</span></span><br><span class="line">        <span class="built_in">puts</span>(s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(fp);<span class="comment">//关闭指针</span></span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="从文件读取数据块：fread"><a href="#从文件读取数据块：fread" class="headerlink" title="从文件读取数据块：fread"></a>从文件读取数据块：fread</h4><ul>
<li>函数原型：<code>int fread(void *buffer, int size, int count, FILE *fp)</code></li>
<li>功能：<ul>
<li>从文件指针fp所指的文件的当前位置读取字节数为size大小的数据块共count个，存到buffer所指的内存存储区中。</li>
</ul>
</li>
<li>参数：<ul>
<li>buffer：指向存放读入数据存储区的首地址的指针。</li>
<li>size：数据块的字节数，即一个数据块的大小。</li>
<li>count：一次读入数据块的数量。</li>
<li>fp：文件指针，指向要从中读出数据的文件。</li>
</ul>
</li>
<li>返回值：<ul>
<li>正常返回：实际读取数据块的个数，即count。</li>
<li>异常返回：0。</li>
</ul>
</li>
</ul>
<h4 id="向文件写入数据块：fwrite"><a href="#向文件写入数据块：fwrite" class="headerlink" title="向文件写入数据块：fwrite"></a>向文件写入数据块：fwrite</h4><ul>
<li>函数原型：<code>int fwrite(void *buffer, int size, int count, FILE *fp)</code></li>
<li>功能：<ul>
<li>将以buffer为起始地址的长度为size的count个数据块输出到文件指针fp所指的位置去。</li>
</ul>
</li>
<li>参数：<ul>
<li>buffer：指向存放输出数据存储区的首地址的指针。</li>
<li>size：数据块的字节数，即一个数据块的大小。</li>
<li>count：一次输出数据块的数量。</li>
<li>fp：文件指针，指向要从中写入数据的文件。</li>
</ul>
</li>
<li>返回值：<ul>
<li>正常返回：实际输出数据块的个数，即count。</li>
<li>异常返回：0。</li>
</ul>
</li>
</ul>
<h4 id="块读写应用"><a href="#块读写应用" class="headerlink" title="块读写应用"></a>块读写应用</h4><p><strong><code>fread</code>和<code>fwrite</code>常用于读写二进制文件。</strong></p>
<p><strong>例：</strong></p>
<p>假设fp指向以二进制形式打开的可读写文件，并有如下说明：</p>
<p><code>float f; double d[10];</code></p>
<p><strong>常见的块读写应用示例：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fwrite</span>(&amp;f,<span class="built_in">sizeof</span>(<span class="type">float</span>),<span class="number">1</span>,fp); <span class="comment">//把浮点数f写入文件</span></span><br><span class="line"><span class="built_in">fwrite</span>(d,<span class="built_in">sizeof</span>(<span class="type">double</span>),<span class="number">10</span>,fp);  <span class="comment">//把数组d中所有数写入文件</span></span><br><span class="line"><span class="built_in">fread</span>(&amp;f,<span class="built_in">sizeof</span>(<span class="type">float</span>),<span class="number">1</span>,fp);  <span class="comment">//从文件中以块形式读一浮点数到变量f中</span></span><br><span class="line"><span class="built_in">fread</span>(d,<span class="built_in">sizeof</span>(d),<span class="number">1</span>,fp);  <span class="comment">//从文件中一次性读一个数组d大小的数据块到数组d中</span></span><br></pre></td></tr></table></figure>

<h5 id="例3"><a href="#例3" class="headerlink" title="例3"></a><strong>例3</strong></h5><p>从键盘上读入5个学生的成绩信息，将它们以文件的形式保存在磁盘上。然后再将从文件中读取学生信息，并在屏幕上显示出来。假设学生成绩信息包括学生姓名、学号、总分。</p>
<p><strong>分析：</strong></p>
<p>程序处理的数据为<strong>结构数组</strong>，应选择<strong>块读写</strong>的方式进行文件操作，具体步骤如下：</p>
<ul>
<li>声明学生成绩结构类型</li>
<li>定义学生成绩结构数组</li>
<li>以块读写的方式对学生信息进行文件读写</li>
</ul>
<p>程序实现：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> N 5</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">20</span>];</span><br><span class="line">    <span class="type">char</span> num[<span class="number">8</span>];</span><br><span class="line">    <span class="type">double</span> score;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">student</span> s[N],t[N];</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">if</span> ((fp=<span class="built_in">fopen</span>(<span class="string">&quot;student.dat&quot;</span>,<span class="string">&quot;wb&quot;</span>))==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;can&#x27;t openstudent.dat&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;<span class="comment">//判定是否成功打开</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">    &#123; cin&gt;&gt;s[i].name&gt;&gt;s[i].num&gt;&gt;s[i].score;</span><br><span class="line">        <span class="built_in">fwrite</span>(&amp;s[i],<span class="built_in">sizeof</span>(student),<span class="number">1</span>,fp); <span class="comment">//对于第i个学生，逐元素向文件写数据</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(fp);<span class="comment">//写文件结束先关闭，再以读的方式打开</span></span><br><span class="line">    <span class="keyword">if</span> ((fp=<span class="built_in">fopen</span>(<span class="string">&quot;student.dat&quot;</span>,<span class="string">&quot;rb&quot;</span>))==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;can&#x27;t openstudent.dat&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fread</span>(t,<span class="built_in">sizeof</span>(t),<span class="number">1</span>,fp); <span class="comment">//一次性从文件读出整个数组</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">        cout&lt;&lt;s[i].name&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;s[i].num&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;s[i].score&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">fclose</span>(fp);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="向文件格式化写入数据：fprintf"><a href="#向文件格式化写入数据：fprintf" class="headerlink" title="向文件格式化写入数据：fprintf"></a>向文件格式化写入数据：fprintf</h4><ul>
<li>函数原型：<code>int fprintf(FILE *fp,const char *format,arg_list)</code></li>
<li>功能说明：将变量表列<code>(arg_list)</code>中的数据，按照<code>format</code>指出的格式，写入由<code>fp</code>指定的文件。</li>
<li>参数说明：<ul>
<li><code>fp</code>：文件指针，指向将数据写入的文件。</li>
<li><code>format</code>：指向写出数据格式字符串的指针.</li>
<li><code>arg_list</code>：要写入文件的变量表列，各变量之间用逗号分隔。</li>
</ul>
</li>
<li>返回值：<ul>
<li>正常返回：输出的字节数。</li>
<li>异常返回：负值。</li>
</ul>
</li>
<li>示例：<code>fprintf(fp,&quot;%d%s&quot;,4,&quot;China&quot;);</code><ul>
<li>表示将整数4和字符串”China”按整数和字符串的形式写入fp所指的文件中。</li>
</ul>
</li>
</ul>
<h4 id="从文件格式化读取数据-：fscanf"><a href="#从文件格式化读取数据-：fscanf" class="headerlink" title="从文件格式化读取数据 ：fscanf"></a>从文件格式化读取数据 ：fscanf</h4><ul>
<li><p>函数原型：<code>int fscanf(FILE *fp,const char *format,add_list)</code></p>
</li>
<li><p>功能说明：按照<code>format</code>指出的格式，从<code>fp</code>指定的文件中读取数据存 放至地址表列<code>(add_list)</code>的变量中。</p>
</li>
<li><p>参数说明：</p>
<ul>
<li><code>fp</code>：文件指针，指向要从中读取数据的文件。</li>
<li><code>format</code>：指向读取数据格式字符串的指针。</li>
<li><code>add_list</code>：存放读取数据的变量的地址表列。</li>
</ul>
</li>
<li><p>返回值：</p>
<ul>
<li>正常返回：成功读取的参数的个数。</li>
<li>异常返回：EOF（-1）。</li>
</ul>
</li>
<li><p>示例：</p>
<p><code>fscanf(fp,&quot;%d%d&quot; ,&amp;x,&amp;y);</code></p>
<p>表示从fp所指的文件中顺序读取两个整数给变量x和y。</p>
<p>地址符号<code>&amp;</code>不能省略。</p>
</li>
</ul>
<h5 id="fscanf-s"><a href="#fscanf-s" class="headerlink" title="fscanf_s"></a>fscanf_s</h5><blockquote>
<p>vs2022那令人恼火的安全函数</p>
</blockquote>
<p>和fscanf区别就是fscanf_s比fscanf多了个域宽检查，会多一个参数</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s&quot;</span>,str);</span><br><span class="line"><span class="built_in">fscanf_s</span>(fp,<span class="string">&quot;%s&quot;</span>,str,<span class="number">20</span>);<span class="comment">//fsanf_s会比fscanf多一个说明要读出数据内存大小的数字。</span></span><br></pre></td></tr></table></figure>

<p>读取多个数据：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fscanf_s</span>(fp, <span class="string">&quot;%s %s %s&quot;</span>, s1,<span class="number">20</span>, s2,<span class="number">20</span>, s3,<span class="number">20</span>);</span><br></pre></td></tr></table></figure>

<p>读取多个数字的字符串：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fscanf_s</span>(fp, <span class="string">&quot;%s %s %s %d %d&quot;</span>, s1, <span class="number">20</span>, s2, <span class="number">20</span>, s3, <span class="number">20</span>,&amp;a,&amp;b);</span><br></pre></td></tr></table></figure>

<h5 id="例4"><a href="#例4" class="headerlink" title="例4"></a>例4</h5><p>用格式化读写文件方式实现例三相同的功能</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> N 5</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">20</span>],num[<span class="number">8</span>];</span><br><span class="line">    <span class="type">double</span> score;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    FILE *fp;</span><br><span class="line">    <span class="keyword">if</span> ((fp=<span class="built_in">fopen</span>(<span class="string">&quot;student.dat&quot;</span>,<span class="string">&quot;wb&quot;</span>))==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;can&#x27;t openstudent.dat&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;<span class="comment">//判定是否成功打开</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">    &#123; cin&gt;&gt;name&gt;&gt;num&gt;&gt;score;</span><br><span class="line">        <span class="built_in">fprintf</span>(fp,<span class="string">&quot;%s %s %lf&quot;</span>,name,num,score); <span class="comment">//对于第i个学生，逐元素向文件写数据</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(fp);<span class="comment">//写文件结束先关闭，再以读的方式打开</span></span><br><span class="line">    <span class="keyword">if</span> ((fp=<span class="built_in">fopen</span>(<span class="string">&quot;student.dat&quot;</span>,<span class="string">&quot;rb&quot;</span>))==<span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="string">&quot;can&#x27;t openstudent.dat&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fscanf</span>(fp,<span class="string">&quot;%s%s%lf&quot;</span>,name,num,&amp;score);<span class="comment">//name和num无需地址符号，因为它们是数组名</span></span><br><span class="line">        cout&lt;&lt;name&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;num&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;score&lt;&lt;endl;</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="built_in">fclose</span>(fp);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="随机读写"><a href="#随机读写" class="headerlink" title="随机读写"></a>随机读写</h3><ul>
<li>顺序读写文件只能从头开始，顺序读写各个数据。</li>
<li>随机读写可按需要只读写文件中某些<strong>指定</strong>的部分。</li>
<li>随机读写的关键是要<strong>按要求移动位置指针</strong>，即进行文件的<strong>定位</strong>。</li>
<li>实现文件定位、移动文件内部位置指针的函数主要有<code>rewind</code>函数 和<code>fseek</code>函数。</li>
</ul>
<h4 id="rewind函数"><a href="#rewind函数" class="headerlink" title="rewind函数"></a>rewind函数</h4><ul>
<li>函数原型：<code>void rewind(FILE *fp)</code></li>
<li>功能说明：使指示文件位置的<strong>指针重新返回到文件开始</strong>。</li>
</ul>
<h4 id="fseek函数"><a href="#fseek函数" class="headerlink" title="fseek函数"></a>fseek函数</h4><ul>
<li>函数原型：<code>int fseek(FILE *fp, long offset, int whence)</code></li>
<li>功能说明：使文件指针fp移到基于whence的相对位置offset处。</li>
<li>参数说明：<ul>
<li>offset是相对whence的字节位移量，用长整型表示。</li>
<li>whence是移动的基准，常用符号常量表示。</li>
</ul>
</li>
<li>返回值：<ul>
<li>正常返回：0。</li>
<li>异常返回：-1，表示定位操作出错。</li>
</ul>
</li>
</ul>
<p><strong>whence：</strong></p>
<p>符号常量</p>
<p>值</p>
<p>基准位置</p>
<p>SEEK_SET</p>
<p>0</p>
<p>文件开头</p>
<p>SEEK_CUR</p>
<p>1</p>
<p>当前读写的位置</p>
<p>SEEK_END</p>
<p>2</p>
<p>文件尾部</p>
<p><strong>示例：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">fseek</span>(fp,<span class="number">1234L</span>,SEEK_CUR);</span><br><span class="line"><span class="comment">//把读写位置从当前位置向后移动1234字节（L后缀表示长整数）</span></span><br><span class="line"><span class="built_in">fseek</span>(fp,<span class="number">0L</span>,<span class="number">2</span>);</span><br><span class="line"><span class="comment">//把读写位置移动到文件末尾</span></span><br></pre></td></tr></table></figure>

<h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><p><strong>1</strong></p>
<p>编写程序，从键盘输入一串字符，要求将该串字符的倒序串先写入到文件f1.txt中，然后再将原字符串的内容接到该文件的末尾。例如，假设从键盘输入的字符串为“How do you do?”，则文件f1.txt的内容为：</p>
<p>?od uoy od woHHow do you do?</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 256</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FILE* fp;</span><br><span class="line">    <span class="type">char</span> s[N],t[N];</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">errno_t</span> err = <span class="built_in">fopen_s</span>(&amp;fp,<span class="string">&quot;C:\\Users\\pc\\Desktop\\ctest.txt&quot;</span>, <span class="string">&quot;w&quot;</span>);<span class="comment">//只写方式打开file1</span></span><br><span class="line">    <span class="keyword">if</span> (fp == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;fail to open ctest.txt&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;输入字符串：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">gets_s</span>(s);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; s[i] != <span class="string">&#x27;\0&#x27;</span>; i++)</span><br><span class="line">        t[i] = s[<span class="built_in">strlen</span>(s) - i - <span class="number">1</span>];</span><br><span class="line">    t[i] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="built_in">fputs</span>(t, fp);</span><br><span class="line">    <span class="built_in">fseek</span>(fp, <span class="number">0L</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="built_in">fputs</span>(s, fp);</span><br><span class="line">    <span class="built_in">fclose</span>(fp);</span><br><span class="line">    <span class="type">errno_t</span> err1 = <span class="built_in">fopen_s</span>(&amp;fp,<span class="string">&quot;C:\\Users\\pc\\Desktop\\ctest.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (fp == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;can&#x27;t open ctest.txt&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">feof</span>(fp))<span class="comment">//指针指到的地方没结束的话</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fgets</span>(s, <span class="number">31</span>, fp);<span class="comment">//每次读取31个字符</span></span><br><span class="line">        <span class="built_in">puts</span>(s);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(fp);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2</strong></p>
<p>用记事本建立一个文本文件f2.txt，在该文件中任意存放一组整数。编写程序统计该文件中正整数、负整数和零的个数。（提示：用fscanf函数读取文件中的数据）</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 256</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FILE* fp;</span><br><span class="line">    <span class="type">int</span> num=<span class="number">0</span>,pos=<span class="number">0</span>,neg=<span class="number">0</span>,zero=<span class="number">0</span>;</span><br><span class="line">    <span class="type">errno_t</span> err = <span class="built_in">fopen_s</span>(&amp;fp,<span class="string">&quot;C:\\Users\\pc\\Desktop\\f2.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (fp == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;fail to open ctest.txt&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span> (!<span class="built_in">feof</span>(fp))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">fscanf_s</span>(fp, <span class="string">&quot;%d&quot;</span>, &amp;num);</span><br><span class="line">        <span class="keyword">if</span> (num &gt; <span class="number">0</span>)</span><br><span class="line">            pos++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (num &lt; <span class="number">0</span>)</span><br><span class="line">            neg++;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (num == <span class="number">0</span>)</span><br><span class="line">            zero++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(fp);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;正整数有&quot;</span> &lt;&lt; pos &lt;&lt; <span class="string">&quot;个，负整数有&quot;</span> &lt;&lt; neg &lt;&lt; <span class="string">&quot;个，零有&quot;</span> &lt;&lt; zero &lt;&lt; <span class="string">&quot;个。&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>负整数好像多了一个？</p>
<p><strong>3</strong></p>
<p>‎将从键盘输入的N个学生的学号和成绩存入到文件student.dat中。再从文件中读取学生的信息，求出最高分、最低分和总分。N可通过符号常量自行定义大小。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 5 <span class="comment">//N个学生</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> num[<span class="number">8</span>];</span><br><span class="line">    <span class="type">double</span> score;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FILE* fp,* fp1;</span><br><span class="line">    student s[N], t[N];</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">errno_t</span> err = <span class="built_in">fopen_s</span>(&amp;fp,<span class="string">&quot;student.dat&quot;</span>, <span class="string">&quot;wb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (fp == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;fail to open student.dat&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;输入第&quot;</span> &lt;&lt; i<span class="number">+1</span> &lt;&lt; <span class="string">&quot;位学生的学号和成绩：&quot;</span> &lt;&lt; endl;</span><br><span class="line">        cin &gt;&gt; s[i].num &gt;&gt; s[i].score;</span><br><span class="line">        <span class="built_in">fwrite</span>(&amp;s[i], <span class="built_in">sizeof</span>(student), <span class="number">1</span>, fp);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(fp);</span><br><span class="line">    <span class="type">errno_t</span> err1 = <span class="built_in">fopen_s</span>(&amp;fp1, <span class="string">&quot;student.dat&quot;</span>, <span class="string">&quot;rb&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (fp1 == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;fail to open student.dat&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">double</span> max = <span class="number">0</span>, min = <span class="number">999</span>, sum = <span class="number">0</span>,score;</span><br><span class="line">    <span class="type">char</span> num[N];</span><br><span class="line">    <span class="built_in">fread</span>(t, <span class="built_in">sizeof</span>(t), <span class="number">1</span>, fp);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        sum += t[i].score;</span><br><span class="line">        <span class="keyword">if</span> (t[i].score &gt; max)</span><br><span class="line">            max = t[i].score;</span><br><span class="line">        <span class="keyword">if</span> (t[i].score &lt; min)</span><br><span class="line">            min = t[i].score;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fclose</span>(fp1);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;最高分：&quot;</span> &lt;&lt; max &lt;&lt; <span class="string">&quot;最低分：&quot;</span> &lt;&lt; min&lt;&lt; <span class="string">&quot;总分：&quot;</span> &lt;&lt; sum&lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>4</strong></p>
<p>编写程序，将一存放一行字符串的文本文件中的每一个字符及其所对应的ASCII码输出到屏幕上。例如文件的内容是“I love China”，则输出：</p>
<p>I(73) (32)l(108)o(111)v(118)e(101) (32)C(67)h(104)i(105)n(110)a(97)</p>
<p>注意：空格也是有效字符。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 100</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    FILE* fp;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">char</span> s[N];</span><br><span class="line">    <span class="type">errno_t</span> err = <span class="built_in">fopen_s</span>(&amp;fp,<span class="string">&quot;C:\\Users\\pc\\Desktop\\ctest.txt&quot;</span>, <span class="string">&quot;r&quot;</span>);<span class="comment">//ctest.txt是一个桌面文本文件</span></span><br><span class="line">    <span class="keyword">if</span> (fp == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; <span class="string">&quot;fail to open ctest.txt&quot;</span>;</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; !<span class="built_in">feof</span>(fp); i++)</span><br><span class="line">        s[i]=<span class="built_in">fgetc</span>(fp);</span><br><span class="line">    s[i] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">    <span class="built_in">fclose</span>(fp);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; s[i] != <span class="string">&#x27;\0&#x27;</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; s[i] &lt;&lt; <span class="string">&quot;(&quot;</span>;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, s[i]);</span><br><span class="line">        cout&lt;&lt; <span class="string">&quot;)&quot;</span> &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/02/05/%E7%AC%AC%E5%8D%81%E4%BA%8C%E8%AE%B2-%E6%96%87%E4%BB%B6/" data-id="cm1hr2hq70078dwue2wq5g1o4" data-title="第十二讲 文件" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c-c/" rel="tag">c&#x2F;c++</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-第十讲-结构" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/05/%E7%AC%AC%E5%8D%81%E8%AE%B2-%E7%BB%93%E6%9E%84/" class="article-date">
  <time class="dt-published" datetime="2024-02-05T10:42:53.000Z" itemprop="datePublished">2024-02-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/notebook/">notebook</a>►<a class="article-category-link" href="/categories/notebook/C-C/">C/C++</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/02/05/%E7%AC%AC%E5%8D%81%E8%AE%B2-%E7%BB%93%E6%9E%84/">第十讲 结构</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="第十讲-结构"><a href="#第十讲-结构" class="headerlink" title="第十讲 结构"></a>第十讲 结构</h1><h2 id="10-1-结构体类型"><a href="#10-1-结构体类型" class="headerlink" title="10.1 结构体类型"></a>10.1 结构体类型</h2><p>例：输入5个学生的信息，如何将这些信息按平均分倒序排序并输出？学生信息：学号、姓名、语文、数学、外语三门课成绩。</p>
<ul>
<li>如何描述5个学生的信息？</li>
</ul>
<ol>
<li>独立变量：30个；</li>
<li>通常的数组：定义多个数组，分别存放5人的姓名、学号、成绩</li>
<li>使用结构类型数组！</li>
</ol>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">20</span>];</span><br><span class="line">    <span class="type">char</span> no[<span class="number">7</span>];</span><br><span class="line">    <span class="type">int</span> Chinese,English,math;</span><br><span class="line">&#125;s[<span class="number">5</span>];</span><br></pre></td></tr></table></figure>

<h3 id="结构类型的概念"><a href="#结构类型的概念" class="headerlink" title="结构类型的概念"></a>结构类型的概念</h3><p>按类型和性质将可能不同但有关联的数据组合在一起构成的集合。</p>
<h3 id="结构类型如何声明"><a href="#结构类型如何声明" class="headerlink" title="结构类型如何声明"></a>结构类型如何声明</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> 结构类型标识符  <span class="comment">//结构类型关键字</span></span><br><span class="line">&#123;</span><br><span class="line">    结构成员<span class="number">1</span>定义;</span><br><span class="line">    结构成员<span class="number">2</span>定义;</span><br><span class="line">    ...;</span><br><span class="line">    结构成员n定义;</span><br><span class="line">&#125;; <span class="comment">//;不能省!!</span></span><br></pre></td></tr></table></figure>

<ul>
<li><p>结构变量的成员可以像同类型普通变量一样使用；</p>
</li>
<li><p>结构成员名可以与结构外的其他变量同名，二者不代表同一个对象；</p>
</li>
</ul>
<p><strong>结构类型可以嵌套定义</strong>，即一个结构类型的变量可以作为<strong>另一</strong>结构类型的成员。（但不能作为自身的）</p>
<p>例：先声明结构类型date，再声明结构类型person</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">date</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> month;</span><br><span class="line">    <span class="type">int</span> day;</span><br><span class="line">    <span class="type">int</span> year;                </span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> name=[];</span><br><span class="line">    <span class="type">char</span> sex;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">date</span> birthday;<span class="comment">//也可以直接date birthday</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><img src="/img/image-20231109105019428.png" alt="image-20231109105019428"></p>
<p>结构成员 <code>birthday</code> 是内嵌在 <code>struct person</code> 类型中的另一个结构类型的变量。</p>
<h3 id="结构变量如何定义"><a href="#结构变量如何定义" class="headerlink" title="结构变量如何定义"></a>结构变量如何定义</h3><p>结构类型不是程序操作的对象，不占用内存空间，只有在定义结构变量后，系统才会为之分配内存单元。定义方式：</p>
<ul>
<li>先声明结构类型再定义结构变量</li>
<li>在声明结构类型的同时定义结构变量</li>
<li>省略结构标识符直接定义结构变量</li>
</ul>
<p>例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">15</span>];</span><br><span class="line">    <span class="type">char</span> sex;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">date</span> birthday;</span><br><span class="line">&#125;p1,p2;<span class="comment">//声明类型的同时定义变量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">15</span>];</span><br><span class="line">    <span class="type">char</span> sex;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">date</span> birthday;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">person</span> p1,p2; <span class="comment">//先声明类型再定义变量</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">15</span>];</span><br><span class="line">    <span class="type">char</span> sex;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">date</span> birthday;</span><br><span class="line">&#125;p1,p2;<span class="comment">//无类型名变量，也只能有这里定义的两个变量了</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line"><span class="type">char</span> name[<span class="number">30</span>];</span><br><span class="line"><span class="type">char</span> num[<span class="number">10</span>];</span><br><span class="line"><span class="type">double</span> score;</span><br><span class="line">&#125;s= &#123;<span class="string">&quot;FangMin&quot;</span>, <span class="string">&quot;1300010&quot;</span>, <span class="number">87</span>&#125;;</span><br><span class="line"><span class="comment">/*结构变量的初始化:</span></span><br><span class="line"><span class="comment">该初始化语句为结构变量 s 的 name 成员赋初值&quot;FangMin&quot;、为 num 成员赋初值&quot;1300010&quot;、为 score 成员赋初值 87。*/</span></span><br></pre></td></tr></table></figure>

<h2 id="10-2-结构体变量"><a href="#10-2-结构体变量" class="headerlink" title="10.2 结构体变量"></a>10.2 结构体变量</h2><h3 id="结构变量的访问"><a href="#结构变量的访问" class="headerlink" title="结构变量的访问"></a>结构变量的访问</h3><h4 id="结构成员的访问"><a href="#结构成员的访问" class="headerlink" title="结构成员的访问"></a>结构成员的访问</h4><p>结构变量多数情况下需访问到成员，而不能整体访问。</p>
<ul>
<li><p>通过结构变量访问成员：</p>
<p><code>结构变量名.成员名</code></p>
</li>
<li><p>通过指向结构的指针访问成员：</p>
<p><code>(*指向结构的指针).成员名</code></p>
<p>注：括号不能省略，否则优先<code>.</code>运算</p>
<ul>
<li>指针访问成员的专门运算符：</li>
</ul>
<p><code>p-&gt;name</code></p>
</li>
</ul>
<p>例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">date</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> month;</span><br><span class="line">    <span class="type">int</span> day;</span><br><span class="line">    <span class="type">int</span> year;                </span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">person</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">15</span>];</span><br><span class="line">    <span class="type">char</span> sex;</span><br><span class="line">    <span class="type">int</span> age;</span><br><span class="line">    date birthday;</span><br><span class="line">&#125;p1,*p=&amp;p1;</span><br></pre></td></tr></table></figure>

<p>可如下访问：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">p<span class="number">1.</span>age=<span class="number">21</span>;</span><br><span class="line"><span class="built_in">strcpy</span>(p-&gt;name,<span class="string">&quot;Fang Min&quot;</span>); <span class="comment">//p-&gt;name是字符数组，赋值要用strcpy函数</span></span><br><span class="line">p-&gt;birthday.month=<span class="number">8</span>;<span class="comment">//p-&gt;birthday已经是date类型变量，和month的关系是.</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//对p1赋值（普通）：</span></span><br><span class="line"><span class="built_in">strcpy</span> (p<span class="number">1.</span>name, <span class="string">&quot;Fang Min&quot;</span>);</span><br><span class="line">p<span class="number">1.</span>sex = <span class="string">&#x27;F&#x27;</span>;</span><br><span class="line">p<span class="number">1.</span>age = <span class="number">24</span>;</span><br><span class="line">p<span class="number">1.</span>birthday.month = <span class="number">8</span>;</span><br><span class="line">p<span class="number">1.</span>birthday.day = <span class="number">10</span>;</span><br><span class="line">p<span class="number">1.</span>birthday.year = <span class="number">1989</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">//借助结构指针对p1赋值：</span></span><br><span class="line"><span class="built_in">strcpy</span>(p-&gt;name, <span class="string">&quot;Fang Min&quot;</span>);</span><br><span class="line">p-&gt;sex = <span class="string">&#x27;F&#x27;</span>;</span><br><span class="line">p-&gt;age = <span class="number">24</span>;</span><br><span class="line">p-&gt;birthday.month = <span class="number">8</span>;</span><br><span class="line">p-&gt;birthday.day = <span class="number">10</span>;</span><br><span class="line">p-&gt;birthday.year = <span class="number">1988</span>;</span><br></pre></td></tr></table></figure>

<p>其中，</p>
<p><code>name</code> 成员为<strong>字符数组</strong>，对字符数组赋值必须通过调用 <code>strcpy</code> 函数实现，而不能直接用赋值语句；</p>
<p>而 <code>birthday</code> 成员本身又是一个内嵌的结构类型变量，所以也要按<strong>结构成员访问方式</strong>访问到它的具体成员 year、 month、 day。</p>
<blockquote>
<p>总结：小心字符数组char s[N]和内嵌型结构变量。</p>
</blockquote>
<h3 id="访问原则"><a href="#访问原则" class="headerlink" title="访问原则"></a>访问原则</h3><ul>
<li>不允许<strong>整体输入输出</strong>结构变量，必须逐成员输入输出；</li>
<li>允许<strong>整体赋值</strong>和<strong>做函数参数</strong>；</li>
<li>引用成员时若成员本身又属复杂类型，则需逐级找到最低一级成员；</li>
<li>成员需遵循同类型普通变量的使用规则及其各种运算。</li>
</ul>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><ul>
<li><p>结构变量初始化</p>
<p>各成员的初值按顺序组织在<code>&#123;&#125;</code>中。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">person</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">char</span> name[<span class="number">15</span>];</span><br><span class="line">  <span class="type">char</span> sex;</span><br><span class="line">  <span class="type">int</span> age;</span><br><span class="line">  <span class="keyword">struct</span> <span class="title class_">date</span> birthday;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">person</span> p=&#123;<span class="string">&quot;Tom&quot;</span>,<span class="string">&#x27;F&#x27;</span>,<span class="number">18</span>,&#123;<span class="number">12</span>,<span class="number">21</span>,<span class="number">2015</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>结构数组初始化</p>
<p>每个数组元素都是一个结构变量，组织在内层<code>&#123;&#125;</code>中；所有数组元素组织在外层<code>&#123;&#125;</code>中。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="type">char</span> name[<span class="number">15</span>];</span><br><span class="line">  <span class="type">char</span> num[<span class="number">7</span>];</span><br><span class="line">  <span class="type">int</span> score;</span><br><span class="line">&#125;p[<span class="number">10</span>]=&#123;&#123;<span class="string">&quot;Fang Min&quot;</span>,<span class="string">&quot;1403235&quot;</span>,<span class="number">84</span>&#125;,&#123;<span class="string">&quot;Fang Hua&quot;</span>,<span class="string">&quot;1403256&quot;</span>,<span class="number">75</span>&#125;&#125;;<span class="comment">//p[0]和p[1]初始化了，p[2]~p[9]的成员值默认为空串或0</span></span><br></pre></td></tr></table></figure>

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">gets</span>(p<span class="number">1.</span>name);</span><br><span class="line"><span class="built_in">gets</span>(name);</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="10-3-结构的应用"><a href="#10-3-结构的应用" class="headerlink" title="10.3 结构的应用"></a>10.3 结构的应用</h2><h3 id="引例的实现"><a href="#引例的实现" class="headerlink" title="引例的实现"></a>引例的实现</h3><p>输入5个学生的信息，如何将这些信息按平均分倒序排序并输出？学生信息：学号、姓名、语文、数学、外语三门课成绩。</p>
<p><strong>分析：</strong></p>
<ul>
<li>数据结构的选取：应将平均分也定义在“学生”结构类型中；</li>
<li>正确理清层次关系；</li>
<li>明确输入、输出、赋值等操作数据的访问要求。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 5</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">20</span>];</span><br><span class="line">    <span class="type">char</span> no[<span class="number">7</span>];</span><br><span class="line">    <span class="type">double</span> Chinese,Engilsh,math,avg;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i,j;</span><br><span class="line">    student s[N],t;<span class="comment">//s[N]:student类数组，输入如下：</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin&gt;&gt;s[i].name&gt;&gt;s[i].Chinese&gt;&gt;s[i].English&gt;&gt;s[i].math;<span class="comment">//逐元素逐成分输入</span></span><br><span class="line">        s[i].avg=(s[i].Chinese+s[i].English+s[i].math)/<span class="number">3</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//冒泡法排序</span></span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N<span class="number">-1</span>;i++)</span><br><span class="line">        <span class="keyword">for</span>(j=<span class="number">0</span>;j&lt;N<span class="number">-1</span>-i;j++)</span><br><span class="line">            <span class="keyword">if</span>(s[j].avg&gt;s[j<span class="number">+1</span>].avg) <span class="comment">//结构变量允许整体赋值</span></span><br><span class="line">            &#123;</span><br><span class="line">                t=s[j];</span><br><span class="line">                s[j]=s[j<span class="number">+1</span>];</span><br><span class="line">                s[j<span class="number">+1</span>]=t;</span><br><span class="line">            &#125;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;s[i].name&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;s[i].no&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;s[i].Chinese&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">        cout&lt;&lt;s[i].English&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;s[i].math&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;s[i].avg&lt;&lt;endl;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&#x27;pause&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>附：如果对学号（字符串）排序，则需要使用strcmp()：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(<span class="built_in">strcmp</span>(s[i].no,s[i<span class="number">+1</span>].no)&gt;<span class="number">0</span>)</span><br></pre></td></tr></table></figure>

<h3 id="结构变量在函数中的应用"><a href="#结构变量在函数中的应用" class="headerlink" title="结构变量在函数中的应用"></a>结构变量在函数中的应用</h3><p>例：定义包含小时、分钟、秒三个成员的时间结构类型，写一转换函数 ，将24小时制的时间转换成12小时制。</p>
<p><strong>分析：</strong></p>
<ul>
<li>函数参数：接受时间，参数为结构类型变量</li>
<li>函数返回值：同为结构类型。</li>
<li>为方便输出，将是否转换的判断放在主函数。</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 5</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">time</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> hour;</span><br><span class="line">    <span class="type">int</span> minute;</span><br><span class="line">    <span class="type">int</span> second;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">time</span> <span class="built_in">change</span>(<span class="keyword">struct</span> time t)  <span class="comment">//允许结构变量整体做参数//注意此函数的特征</span></span><br><span class="line">&#123;</span><br><span class="line">    t.hour=t.hour%<span class="number">12</span>;</span><br><span class="line">    <span class="keyword">return</span> t;<span class="comment">//返回结构类型</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">time</span> t;</span><br><span class="line">    cin&gt;&gt;t.hour&gt;&gt;t.minute&gt;&gt;t.second;</span><br><span class="line">    <span class="keyword">if</span>(t.hour&gt;<span class="number">12</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        t=<span class="built_in">change</span>(t);</span><br><span class="line">        cout&lt;&lt;t.hour&lt;&lt;<span class="string">&quot;:&quot;</span>&lt;&lt;t.minute&lt;&lt;<span class="string">&quot;:&quot;</span>&lt;&lt;t.second&lt;&lt;<span class="string">&quot;pm&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        cout&lt;&lt;t.hour&lt;&lt;<span class="string">&quot;:&quot;</span>&lt;&lt;t.minute&lt;&lt;<span class="string">&quot;:&quot;</span>&lt;&lt;t.second&lt;&lt;<span class="string">&quot;am&quot;</span>;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&#x27;pause&#x27;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h4><ul>
<li>结构数组是元素为结构类型变量的数组，对该数组操作时需遵循数组的使用原则，对每个元素操作时要符合结构变量的引用原则；</li>
<li>结构变量在输入输出时必须引用到最低级成员；</li>
<li>结构变量做函数参数及赋值运算时可整体引用。</li>
</ul>
<h3 id="附"><a href="#附" class="headerlink" title="附"></a>附</h3><p>指针：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span>* name;</span><br><span class="line">    <span class="type">int</span> grade;</span><br><span class="line">&#125;p[<span class="number">2</span>];</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> s;</span><br><span class="line">    <span class="built_in">gets</span>(s);</span><br><span class="line">    <span class="type">char</span>* p=s;</span><br><span class="line">    <span class="comment">//或者</span></span><br><span class="line">    p=<span class="keyword">new</span> <span class="type">char</span>[<span class="number">20</span>];</span><br><span class="line">    s[i].name=<span class="keyword">new</span> <span class="type">char</span>[<span class="number">10</span>];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><h3 id="测试：各类型变量所占内存字节"><a href="#测试：各类型变量所占内存字节" class="headerlink" title="测试：各类型变量所占内存字节"></a>测试：各类型变量所占内存字节</h3><p>sizeof(char) &#x3D; 1;</p>
<p>sizeof(int) &#x3D; 4;</p>
<p>sizeof(long) &#x3D; 4;</p>
<p>sizeof(float) &#x3D; 4;</p>
<p>sizeof(double) &#x3D; 8.</p>
<p><strong>指针类型的sizeof</strong></p>
<p>指针用于存放地址，它等于计算机内部地址总线的宽度，所以32位计算机中，一个[指针变量]的返回值是4字节(与指针变量的类型无关)。可以预计，在64位系统中指针变量的sizeof等于8。</p>
<p>sizeof(p) &#x3D; 4;</p>
<p><strong>数组的sizeof</strong></p>
<p>数组的sizeof值等于数组所占用的内存字节数，如：</p>
<p>char a1[] &#x3D; “abc”;</p>
<p>int a2[3];</p>
<p>sizeof( a1 ); &#x2F;&#x2F; 结果为4，字符串末尾还存在一个NULL终止符</p>
<p>sizeof( a2 ); &#x2F;&#x2F; 结果为3_4&#x3D;12（3_sizeof(int)）</p>
<p>数组元素个数的求法：</p>
<p>sizeof(a1)&#x2F;sizeof(*a1);</p>
<h3 id="编程"><a href="#编程" class="headerlink" title="编程"></a>编程</h3><h4 id="1"><a href="#1" class="headerlink" title="1"></a>1</h4><p>有一组关于学生成绩的信息，编写函数max，该函数返回值为分数最高的学生的信息（包括学号和分数）。再编写主函数对其进行调用并输出最高分者的信息。假设结构类型定义为：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> *num;</span><br><span class="line">    <span class="type">int</span>  score;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>提示：num定义为指针类型，注意向其复制内容之前要先为其申请空间。</p>
<p>‏</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 256</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span>* num;</span><br><span class="line">    <span class="type">int</span> score;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span> <span class="built_in">max</span>(<span class="keyword">struct</span> student s[N],<span class="type">int</span> n)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">student</span> t = &#123;<span class="number">0</span>,s[<span class="number">0</span>].score &#125;;</span><br><span class="line">    t.num = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">char</span>));</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i].score &gt; t.score)</span><br><span class="line">        &#123;</span><br><span class="line">            t.score = s[i].score;</span><br><span class="line"></span><br><span class="line">            t.num = s[i].num;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">student</span> s[N] = &#123;&#125;, t = &#123;&#125;;</span><br><span class="line">    <span class="type">int</span> n,i;</span><br><span class="line">    t.num = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">char</span>));</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;输入学生数：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="comment">/*char a[N];</span></span><br><span class="line"><span class="comment">    s-&gt;num = a;*/</span></span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;输入各学生序号及成绩：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        s[i].num = (<span class="type">char</span>*)<span class="built_in">malloc</span>(<span class="built_in">sizeof</span>(<span class="type">char</span>));</span><br><span class="line">        cin &gt;&gt; s[i].num &gt;&gt; s[i].score;</span><br><span class="line">    &#125;</span><br><span class="line">    t=<span class="built_in">max</span>(s,n);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;最高分者序号为&quot;</span> &lt;&lt; *t.num &lt;&lt;<span class="string">&quot;，分值为：&quot;</span> &lt;&lt; t.score &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>标答：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 5</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">student</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> *num;</span><br><span class="line">    <span class="type">int</span> score;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function">student <span class="title">max</span><span class="params">(student s[],<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    student t=s[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;n;i++)</span><br><span class="line">        <span class="keyword">if</span>(s[i].score&gt;t.score)</span><br><span class="line">            t=s[i];</span><br><span class="line">    <span class="keyword">return</span> t;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    student s[N],maxs;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        s[i].num=<span class="keyword">new</span> <span class="type">char</span>[<span class="number">10</span>];<span class="comment">//假设学号不超过9位</span></span><br><span class="line">        cin&gt;&gt;s[i].num&gt;&gt;s[i].score;</span><br><span class="line">    &#125;</span><br><span class="line">    maxs=<span class="built_in">max</span>(s,N);      </span><br><span class="line">    cout&lt;&lt;maxs.num&lt;&lt;<span class="string">&#x27; &#x27;</span>&lt;&lt;maxs.score&lt;&lt;endl;</span><br><span class="line"><span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="2"><a href="#2" class="headerlink" title="2"></a>2</h4><p>编写程序，定义一个日期结构变量，计算某日期是本年度的第几天。提示：为简单起见，可定义一个存放12个月中每个月总天数的数组。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta"># <span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 256</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">time</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> month;</span><br><span class="line">    <span class="type">int</span> date;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">change</span><span class="params">(<span class="keyword">struct</span> time t,<span class="type">bool</span> run)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i,num=<span class="number">0</span>, a[<span class="number">12</span>] = &#123; <span class="number">31</span>,<span class="number">28</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span> &#125;, b[<span class="number">12</span>] = &#123; <span class="number">31</span>,<span class="number">29</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">30</span>,<span class="number">31</span> &#125;;</span><br><span class="line">    <span class="keyword">if</span> (run == <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; t.month<span class="number">-1</span>; i++)</span><br><span class="line">            num += b[i];</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; t.month<span class="number">-1</span>; i++)</span><br><span class="line">            num += a[i];</span><br><span class="line">    num += t.date;</span><br><span class="line">    <span class="keyword">return</span> num;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">time</span> t;</span><br><span class="line">    <span class="type">bool</span> run;</span><br><span class="line">    <span class="type">int</span> num;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;今年是不是闰年？（是：1；否：0）&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cin &gt;&gt; run;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;输入一日期（月/日）&quot;</span> &lt;&lt; endl;</span><br><span class="line">    cin &gt;&gt; t.month &gt;&gt; t.date;</span><br><span class="line">    num = <span class="built_in">change</span>(t, run);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;这是今年的第&quot;</span> &lt;&lt; num &lt;&lt; <span class="string">&quot;天&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="3"><a href="#3" class="headerlink" title="3"></a>3</h4><p>‏使用结构数组输入10本书的名称和单价，调用函数按照书名的字母顺序序进行排序，在主函数输出排序结果</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 5</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">book</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> name[<span class="number">100</span>];</span><br><span class="line">    <span class="type">int</span> price;</span><br><span class="line">&#125;;</span><br><span class="line"><span class="comment">/*int *sort(struct book b[])</span></span><br><span class="line"><span class="comment">&#123;</span></span><br><span class="line"><span class="comment">    int i, j, *m[N],a;</span></span><br><span class="line"><span class="comment">    for(i=0;i&lt;N-1;i++)</span></span><br><span class="line"><span class="comment">        for (j = 0; j &lt; N - 1 - i; j++)</span></span><br><span class="line"><span class="comment">        &#123;</span></span><br><span class="line"><span class="comment">            if (b[j].name &gt; b[j + 1].name)</span></span><br><span class="line"><span class="comment">            &#123;</span></span><br><span class="line"><span class="comment">                a = b[j].num;</span></span><br><span class="line"><span class="comment">                b[j].num = b[j + 1].num;</span></span><br><span class="line"><span class="comment">                b[j + 1].num = a;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">    for (i = 0; i &lt; N; i++)</span></span><br><span class="line"><span class="comment">        *m[i] = b[i].num;</span></span><br><span class="line"><span class="comment">    return *m;</span></span><br><span class="line"><span class="comment">&#125;*/</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">book</span> *<span class="built_in">sort</span>(<span class="keyword">struct</span> book b[])</span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i, j;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">book</span> a;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;N<span class="number">-1</span>;i++)</span><br><span class="line">        <span class="keyword">for</span> (j = <span class="number">0</span>; j &lt; N - <span class="number">1</span> - i; j++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="comment">//for(int z=0; b[j].name[z] != &#x27;\0&#x27; &amp;&amp; b[j + 1].name[z] != &#x27;\0&#x27;;z++)</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">strcmp</span>(b[j].name, b[j<span class="number">+1</span>].name) &gt; <span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                a = b[j];</span><br><span class="line">                b[j] = b[j + <span class="number">1</span>];</span><br><span class="line">                b[j + <span class="number">1</span>] = a;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">book</span>* p = b;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">struct</span> <span class="title class_">book</span> b[N],*p;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">        cin &gt;&gt; b[i].name &gt;&gt; b[i].price;</span><br><span class="line">    p = <span class="built_in">sort</span>(b);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;排序后结果：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">        cout &lt;&lt; p[i].name &lt;&lt; <span class="string">&#x27; &#x27;</span> &lt;&lt; p[i].price &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/02/05/%E7%AC%AC%E5%8D%81%E8%AE%B2-%E7%BB%93%E6%9E%84/" data-id="cm1hr2hq7007adwueat0s2vn4" data-title="第十讲 结构" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c-c/" rel="tag">c&#x2F;c++</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-第九讲-函数（续）" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/05/%E7%AC%AC%E4%B9%9D%E8%AE%B2-%E5%87%BD%E6%95%B0%EF%BC%88%E7%BB%AD%EF%BC%89/" class="article-date">
  <time class="dt-published" datetime="2024-02-05T10:38:30.000Z" itemprop="datePublished">2024-02-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/notebook/">notebook</a>►<a class="article-category-link" href="/categories/notebook/C-C/">C/C++</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/02/05/%E7%AC%AC%E4%B9%9D%E8%AE%B2-%E5%87%BD%E6%95%B0%EF%BC%88%E7%BB%AD%EF%BC%89/">第九讲 函数（续）</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="9-1-返回指针值的函数"><a href="#9-1-返回指针值的函数" class="headerlink" title="9.1 返回指针值的函数"></a>9.1 返回指针值的函数</h2><ul>
<li><p>函数的返回值可为变量地址、数组名或指针变量。</p>
</li>
<li><p>在说明&#x2F;定义返回值为指针值的函数时，只需在函数前加一指针类型说明符。</p>
<p>例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">float</span> *<span class="title">fun</span><span class="params">(<span class="type">float</span> x[],<span class="type">float</span> y)</span></span>;</span><br><span class="line"><span class="function"><span class="type">char</span> *<span class="title">strcat1</span><span class="params">(<span class="type">char</span> *strDest,<span class="type">const</span> <span class="type">char</span> *strSource)</span></span></span><br></pre></td></tr></table></figure></li>
</ul>
<p>例：编一函数，将这字符串中ASCII码最大的字符的地址返回，主程序中输出最大数之后的所有数。</p>
<p>分析：</p>
<ol>
<li>如何定义函数的类型？</li>
</ol>
<p>“将这字符串中ASCII码最大的字符的地址返回”，函数应为指针类型。</p>
<p><code>char *getmax(char s[])</code></p>
<ol start="2">
<li>如何表示字符串中ASCII码最大的字符的地址？</li>
</ol>
<p>用该数组元素地址 <code>&amp;s[imax]</code>或<code>s+imax</code>表示，imax：该字符在数组中的位置。</p>
<p>e.g:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">char</span> *<span class="title">getmax</span><span class="params">(<span class="type">char</span> s[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i=<span class="number">1</span>,imax=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span>(s[i]!=<span class="string">&#x27;\0&#x27;</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(s[i]&gt;s[imax])</span><br><span class="line">            imax=i;</span><br><span class="line">        i++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> s+imax; <span class="comment">//return &amp;s[imax];</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>调用:</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">char</span> *max; <span class="comment">//赋给指针类型的变量。</span></span><br><span class="line">max=<span class="built_in">getmax</span>(s);</span><br><span class="line"><span class="built_in">puts</span>(max); <span class="comment">//puts()里面是地址，所以可以”puts(i+imax)“</span></span><br></pre></td></tr></table></figure>

<ul>
<li>返回值为指针的函数，要注意返回值的指向。</li>
</ul>
<h2 id="9-2-作用域与存储类别"><a href="#9-2-作用域与存储类别" class="headerlink" title="9.2 作用域与存储类别"></a>9.2 作用域与存储类别</h2><h3 id="作用域与生存期的概念"><a href="#作用域与生存期的概念" class="headerlink" title="作用域与生存期的概念"></a>作用域与生存期的概念</h3><ul>
<li>作用域（可见性）：在何范围内可被访问；</li>
<li>生存期：在什么 时间内存在。</li>
</ul>
<p>例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">digit</span><span class="params">(<span class="type">long</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x!=<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> k;  <span class="comment">//digit函数中x的作用域</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">long</span> x;</span><br><span class="line">    cin&gt;&gt;x;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">digit</span>(x)&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">//main函数中x的作用域</span></span><br><span class="line">&#125;<span class="comment">//整个程序：x的生存期</span></span><br></pre></td></tr></table></figure>

<p>根据作用域和生存期，变量可分为：</p>
<ul>
<li>全局变量（外部变量）：<ul>
<li>在函数外部定义的变量</li>
</ul>
</li>
<li>周期变量（内部变量）：<ul>
<li>在函数内部定义的变量，包括形式参数</li>
</ul>
</li>
</ul>
<p>存储类型：</p>
<ul>
<li><p>auto</p>
<ul>
<li>局部，生存期：定义它的分程序内</li>
</ul>
</li>
<li><p>static</p>
<ul>
<li>局部，生存期</li>
</ul>
</li>
<li><p>外部变量</p>
</li>
</ul>
<h3 id="自动局部变量"><a href="#自动局部变量" class="headerlink" title="自动局部变量"></a>自动局部变量</h3><ul>
<li>存储类型auto，可缺省</li>
<li>作用域：定义点开始到所在的分程序结束。</li>
<li>生存期：<strong>所在分程序执行期间。</strong></li>
<li>开始执行分程序就生成，执行结束就消亡。</li>
<li>初始化：<strong>缺省值为随机值。</strong></li>
</ul>
<p>例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> k=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (x!=<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> k;  <span class="comment">//digit函数中x的作用域</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">long</span> x;</span><br><span class="line">    cin&gt;&gt;x;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">digit</span>(x)&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;  <span class="comment">//main函数中x的作用域</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>自动局部变量示例：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(<span class="type">int</span> x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    x++;</span><br><span class="line">    <span class="type">int</span> k=<span class="number">5</span>;  <span class="comment">//auto int k=5;</span></span><br><span class="line">    k++;</span><br><span class="line">    <span class="keyword">return</span> x+k;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> k=<span class="number">2</span>; <span class="comment">//auto int k=2;</span></span><br><span class="line">    cout&lt;&lt;<span class="built_in">f</span>(k)&lt;&lt;endl;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">f</span>(k)&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>问题：</p>
<ul>
<li>f函数中的k和main函数中的k会冲突吗？</li>
</ul>
<p>答：不会冲突。不同的函数内可使用相同名称的自动局部变量，它们<strong>占用不同的存储单元</strong>，只能在各自的函数内被使用，<strong>彼此互不干扰。</strong></p>
<ul>
<li>main函数中两次调用f函数，第二次调用时，f函数中的x,k和第一次调用时使用相同的内存单元吗？</li>
</ul>
<p>答：若一个函数被多次调用，每一次函数调用时，系统都会为自动局部变量重新分配存储单元，并重新初始化。函数调用结束后，释放为自动局部变量分配的存储单元，<strong>函数中自动局部变量的值不会带到下一次调用中</strong>。</p>
<h3 id="静态局部变量"><a href="#静态局部变量" class="headerlink" title="静态局部变量"></a>静态局部变量</h3><ul>
<li>存储类别static</li>
<li>作用域：定义点开始到所在的分程序结束。</li>
<li>生存期：<strong>程序的整个执行周期。</strong></li>
<li>初始化：可初始化，<strong>缺省值为0或’\0’</strong></li>
</ul>
<p><strong>静态局部变量VS自动局部变量</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">test</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">    <span class="type">static</span> <span class="type">int</span> j=<span class="number">0</span>;</span><br><span class="line">    i++;j++;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;i=&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;j=&quot;</span>&lt;&lt;j&lt;&lt;endl;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)</span><br><span class="line">        <span class="built_in">test</span>();</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>自动局部变量i，每次调用函数都重新为他分配存储单元并初始化。</li>
<li>静态局部变量j，只在第一次调用函数时分配存储单元并初始化。</li>
</ul>
<p>静态局部变量特点：</p>
<ul>
<li>只在第一次调用函数时为静态局部变量分配存储空间，函数调用结束不会释放为静态局部变量分配新的存储空间。</li>
<li>静态局部变量只初始化一次</li>
<li>若一个函数被调用多次，对静态局部变量而言，前一次调用的结果会带到下一次去。</li>
</ul>
<p>问：</p>
<p>第一次调用test结束，返回main函数后，j的存储空间没有释放，在main函数能访问j吗？</p>
<p>答：在一个分程序中定义的静态局部变量，在其他分程序中，<strong>是生存期，不是作用域，不可访问。</strong></p>
<h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><ul>
<li>作用域：定义点开始到所在的文件结束。</li>
<li>生存期：<strong>程序的整个执行周期。</strong></li>
<li>初始化：可初始化，<strong>缺省值为0或’\0’</strong></li>
</ul>
<p>例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="type">int</span> m=<span class="number">10</span>;<span class="comment">//全局变量m</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f1</span><span class="params">(<span class="type">int</span> n)</span>  <span class="comment">//形参n（局部变量），传值参数，在f1中的变化并不改变真正的n</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    n=<span class="number">2</span>*n;m=m/<span class="number">3</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> n;  <span class="comment">//全局变量n</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">f2</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;n=<span class="number">5</span>;m++;++;&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n=<span class="number">2</span>;   <span class="comment">//局部变量n</span></span><br><span class="line">    <span class="built_in">f1</span>(n);<span class="built_in">f2</span>();</span><br><span class="line">    cout&lt;&lt;m&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;n&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="/img/image-20231102103809883.png" alt="image-20231102103809883"></p>
<p>注意：</p>
<ul>
<li>当全局变量与局部变量同名且作用域有重叠时，<strong>在局部变量的作用域内， 起作用的是局部变量</strong>，而全局变量被“屏蔽”掉。</li>
</ul>
<p><img src="/img/image-20231102104244452.png" alt="image-20231102104244452"></p>
<p>全局变量可在多个函数内使用，前一次的计算结果会带到下一次使用中。</p>
<h4 id="扩展全局变量的作用域"><a href="#扩展全局变量的作用域" class="headerlink" title="扩展全局变量的作用域"></a>扩展全局变量的作用域</h4><ul>
<li>全局变量的作用域：定义点开始到所在的文件结束。</li>
<li>可用<strong>extern关键字</strong>扩展全局变量作用域。</li>
</ul>
<p><strong>扩展到定义点以前</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//extern int i</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">//extern int i</span></span><br><span class="line">    cout&lt;&lt;i;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> i=<span class="number">5</span>;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123; </span><br><span class="line">    <span class="type">int</span> j=<span class="number">20</span>;</span><br><span class="line">    cout&lt;&lt;j;</span><br><span class="line">    <span class="built_in">fun</span>();</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>); </span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>作用域横向扩展</strong></p>
<ul>
<li>1个C&#x2F;C++项目可包含多个源文件</li>
<li>在一个源文件中要引用另一个源文件中定义的全局变量，使用前须用<strong>extern声明符</strong>对其进行扩展</li>
</ul>
<p>例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//file1.cpp</span></span><br><span class="line"><span class="type">int</span> max1,min1;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">maxmin</span><span class="params">(<span class="type">int</span> x[],<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    max1=x[<span class="number">0</span>];min1=x[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(x[i]&gt;max1)max1=x[i];</span><br><span class="line">        <span class="keyword">if</span>(x[i]&lt;min1)min1=x[i];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//file2.cpp</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> ……</span></span><br><span class="line"><span class="keyword">extern</span> <span class="type">int</span> max1,min1;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a[<span class="number">10</span>]=&#123;<span class="number">11</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">-4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">0</span>,<span class="number">20</span>&#125;;</span><br><span class="line">    <span class="built_in">maxmin</span>(a,<span class="number">10</span>);</span><br><span class="line">    cout&lt;&lt;max1&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;min1&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>); <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="9-3-递归函数-（考试只考概念，不考编程）"><a href="#9-3-递归函数-（考试只考概念，不考编程）" class="headerlink" title="9.3 递归函数 （考试只考概念，不考编程）"></a>9.3 递归函数 （考试只考概念，不考编程）</h2><h3 id="递归的概念"><a href="#递归的概念" class="headerlink" title="递归的概念"></a>递归的概念</h3><p>用自身的结构描述自身</p>
<p>例：递归的阶乘定义</p>
<p><code>n!=n*(n-1)!1</code> (n&gt;0)</p>
<p>递归反映问题分解的思维。</p>
<h3 id="递归函数"><a href="#递归函数" class="headerlink" title="递归函数"></a>递归函数</h3><p>函数在函数体内直接或间接地调用自身，称递归函数。</p>
<ul>
<li>直接递归</li>
<li>间接递归：函数通过其他函数间接调用自身</li>
</ul>
<p><strong>例1：求<code>n!</code></strong></p>
<p>思路：达到终结条件，直接求解；未达终结条件，递归调用。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">long</span> <span class="title">fac</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (n==<span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> (n*<span class="built_in">fac</span>(n<span class="number">-1</span>));</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;&lt;<span class="built_in">fac</span>(<span class="number">3</span>)&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>); <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>例2：计算斐波那契数列</strong></p>
<p>f(n)&#x3D;f(n-1)+f(n-2)</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">fib</span><span class="params">(<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(n==<span class="number">0</span>n==<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">return</span> (<span class="built_in">fib</span>(n<span class="number">-1</span>)+<span class="built_in">fib</span>(n<span class="number">-2</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注意递归函数一定要有<strong>终结条件</strong></p>
<h3 id="递归与迭代"><a href="#递归与迭代" class="headerlink" title="递归与迭代"></a>递归与迭代</h3><p>任何用递归解决的问题都可以用迭代非递归解决。</p>
<p><strong>例1：求<code>n!</code></strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">s=<span class="number">1</span>;</span><br><span class="line"><span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    s=s*i;</span><br></pre></td></tr></table></figure>

<p>迭代算法效率高。</p>
<p>根据问题特征决定用迭代还是递归</p>
<h3 id="递归使用"><a href="#递归使用" class="headerlink" title="递归使用"></a>递归使用</h3><h4 id="例：二分法查找"><a href="#例：二分法查找" class="headerlink" title="例：二分法查找"></a>例：二分法查找</h4><p>终结条件：</p>
<ul>
<li>key&#x3D;&#x3D;a[mid]</li>
<li>low&gt;high</li>
</ul>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">Binary_Search</span><span class="params">(<span class="type">int</span> low,<span class="type">int</span> high,<span class="type">int</span> key)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(low&gt;high)</span><br><span class="line">        <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">    <span class="keyword">if</span>(key==a[mid])</span><br><span class="line">        <span class="keyword">return</span> mid;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(key&lt;a[mid])</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">Binary_Search</span>(low,mid<span class="number">-1</span>);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">       <span class="keyword">return</span> <span class="built_in">Binary_Search</span>(mid<span class="number">+1</span>,high); </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="例：进制转换"><a href="#例：进制转换" class="headerlink" title="例：进制转换"></a>例：进制转换</h4><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">convert</span><span class="params">(<span class="type">int</span> m,<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> b[<span class="number">17</span>]=<span class="string">&quot;0123456789ABCDEF&quot;</span>;</span><br><span class="line">    <span class="keyword">if</span>(m!=<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">convert</span>(m/r,r);</span><br><span class="line">        cout&lt;&lt;b[m%r];  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="作业"><a href="#作业" class="headerlink" title="作业"></a>作业</h2><h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><p>编写递归函数int sum(int a[],int n)，其功能是求长度为n的数组的累加和，在主函数中随机产生10个两位数，调用sum函数，求这10个数的和。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 256</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="comment">//sum1:迭代</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum1</span><span class="params">(<span class="type">int</span> a[], <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> sos=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">        sos += a[i];</span><br><span class="line">    <span class="keyword">return</span> sos;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//sum2:递归</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sum2</span><span class="params">(<span class="type">int</span> a[], <span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function"><span class="type">int</span> <span class="title">sos</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span> (n &gt; <span class="number">0</span>)</span><br><span class="line">        sos = a[n - <span class="number">1</span>] + <span class="built_in">sum2</span>(a, n - <span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (n == <span class="number">0</span>)</span><br><span class="line">        <span class="keyword">return</span> sos;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,i,s[N],sos1,sos2;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;   </span><br><span class="line">        s[i] = <span class="number">10</span> + <span class="built_in">rand</span>() % <span class="number">89</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; s[i] &lt;&lt; <span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">    sos1 = <span class="built_in">sum1</span>(s, <span class="number">10</span>);</span><br><span class="line">    sos2 = <span class="built_in">sum2</span>(s, <span class="number">10</span>);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;10个数迭代求得之和为：&quot;</span> &lt;&lt; sos1 &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;10个数递归求得之和为：&quot;</span> &lt;&lt; sos2 &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><p>编写函数get_max，其功能是将字符串s中最大字符的地址返回，再编写一个主函数，调用该函数，将字符串s中从最大字符开始的子串中小写字母转换成大写字母，然后输出新字符串s。例如，假设s的内容为“qwertyou”，则从最大字符’y’开始的子串为“you”，处理后的s为“qwertYOU”。</p>
<p>函数形式为：char *get_max(char s[])</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 256</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">char</span>* <span class="title">get_max</span><span class="params">(<span class="type">char</span> s[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> imax=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">0</span>;s[i]!=<span class="string">&#x27;\0&#x27;</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] &gt; s[imax])</span><br><span class="line">            imax = i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> &amp;s[imax];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n,i;</span><br><span class="line">    <span class="type">char</span>* imax;</span><br><span class="line">    <span class="type">char</span> a[N];</span><br><span class="line">    <span class="built_in">gets_s</span>(a);</span><br><span class="line">    imax = <span class="built_in">get_max</span>(a);</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>;*(imax+i)!=<span class="string">&#x27;\0&#x27;</span>; i++)</span><br><span class="line">        *(imax + i) -= <span class="number">32</span>;</span><br><span class="line">    <span class="built_in">puts</span>(imax);</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>类似的课上例：</p>
<p><strong>【例5.9】search函数的功能是在一字符串中查找某一指定的字符,若找到，则返回字符串中这个字符的地址，否则返回NULL，主函数调用search函数，并输出查找到的那个字符后的子串。</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">char</span> *<span class="title">search</span><span class="params">(<span class="type">char</span> s[],<span class="type">char</span> ch)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">   <span class="keyword">while</span>(                        )</span><br><span class="line">       <span class="keyword">if</span>(s[i]!=ch) </span><br><span class="line">            i++;</span><br><span class="line">       <span class="keyword">else</span>              </span><br><span class="line">                                   ;</span><br><span class="line">   <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">     <span class="type">char</span> s[<span class="number">100</span>],ch,*p;</span><br><span class="line">     <span class="built_in">gets</span>(s);</span><br><span class="line">     cin&gt;&gt;ch;</span><br><span class="line">                                  ;</span><br><span class="line">     <span class="keyword">if</span>(p!=<span class="literal">NULL</span>) </span><br><span class="line">          cout&lt;&lt;p&lt;&lt;endl;</span><br><span class="line">     <span class="keyword">else</span>  </span><br><span class="line">          cout&lt;&lt;<span class="string">&quot;not found\n&quot;</span>;</span><br><span class="line">     <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">     <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/02/05/%E7%AC%AC%E4%B9%9D%E8%AE%B2-%E5%87%BD%E6%95%B0%EF%BC%88%E7%BB%AD%EF%BC%89/" data-id="cm1hr2hq5006rdwue7dl169xa" data-title="第九讲 函数（续）" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c-c/" rel="tag">c&#x2F;c++</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-第八讲-函数" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/02/05/%E7%AC%AC%E5%85%AB%E8%AE%B2-%E5%87%BD%E6%95%B0/" class="article-date">
  <time class="dt-published" datetime="2024-02-05T10:37:45.000Z" itemprop="datePublished">2024-02-05</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/notebook/">notebook</a>►<a class="article-category-link" href="/categories/notebook/C-C/">C/C++</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/02/05/%E7%AC%AC%E5%85%AB%E8%AE%B2-%E5%87%BD%E6%95%B0/">第八讲 函数</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="8-1-代码重用和模块化思想"><a href="#8-1-代码重用和模块化思想" class="headerlink" title="8.1 代码重用和模块化思想"></a>8.1 代码重用和模块化思想</h2><p>大量代码重复，降低开发效率</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">float</span> a,b,c,d,e,f,g,h,i;</span><br><span class="line">    cin&gt;&gt;a&gt;&gt;b&gt;&gt;c&gt;&gt;d&gt;&gt;e&gt;&gt;f&gt;&gt;g&gt;&gt;h&gt;&gt;i;</span><br><span class="line">    <span class="function"><span class="type">float</span> <span class="title">area</span><span class="params">(<span class="type">float</span> x,<span class="type">float</span> y,<span class="type">float</span> z)</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="type">float</span> c,s;</span><br><span class="line">        c=(x+y+z)/<span class="number">2</span>;</span><br><span class="line">        s=<span class="built_in">sqrt</span>((c-x)*(c-y)*(c-z));</span><br><span class="line">        <span class="keyword">return</span> s;</span><br><span class="line">    &#125;</span><br><span class="line">    s=<span class="built_in">area</span>(a,b,c)+<span class="built_in">area</span>(d,e,f)+<span class="built_in">area</span>(g,h,i);</span><br><span class="line">    cout&lt;&lt;s&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>函数研究的3要素：功能、输入值、输出值。</p>
<h2 id="8-2-函数的定义、调用与说明"><a href="#8-2-函数的定义、调用与说明" class="headerlink" title="8.2 函数的定义、调用与说明"></a>8.2 函数的定义、调用与说明</h2><h3 id="函数的定义"><a href="#函数的定义" class="headerlink" title="函数的定义"></a>函数的定义</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">函数类型 函数名(形式参数类型表)</span><br><span class="line">&#123;</span><br><span class="line">    函数体</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>说明：</p>
<ul>
<li><p>函数名需符合标识符的命名规则</p>
</li>
<li><p>形参（形式参数）是函数接受调用者向函数传值的主要途径。</p>
<ul>
<li>形参类型表形式为：</li>
</ul>
<p>类型 形参名1,类型 形参名2,…,类型 形参名n</p>
<ul>
<li>定义时应分别给出每一个形参的类型</li>
</ul>
<p><code>float area(float x,floaty,float z)</code></p>
<p>不能写成：</p>
<p><code>float area(float x,y,z)</code></p>
<ul>
<li>多个形参用逗号分隔；没有形参圆括号不能省略。</li>
</ul>
</li>
<li><p>函数体由语句、分程序组成，用来完成函数的功能。</p>
<ul>
<li>函数体中不允许再嵌套定义函数。</li>
</ul>
<p>例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误：</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">f1</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">        <span class="function"><span class="type">int</span> <span class="title">f2</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        ...</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>函数的类型就是函数返回值的类型</p>
<ul>
<li><p>函数通过return语句返回一个值给调用它的函数</p>
</li>
<li><p>函数返回值和函数类型最好一致。若不一致，该值转换为函数的类型。</p>
</li>
</ul>
<p>例：</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">f</span><span class="params">(intx)</span>:</span></span><br><span class="line"><span class="function">&#123;</span></span><br><span class="line">    <span class="type">float</span> b=x<span class="number">+3.5</span>;</span><br><span class="line">    <span class="keyword">return</span> b;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    cout&lt;</span><br></pre></td></tr></table></figure></li>
</ul>
<pre><code>
### 例：打印多个三角塔

*   使用函数pic
*   `pic()`无参数；没有返回值（void型，无类型或空类型）

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">pic</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;<span class="number">5</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;<span class="built_in">setw</span>(<span class="number">10</span>-i);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> j=<span class="number">0</span>;j&lt;<span class="number">2</span>*i<span class="number">-1</span>;j++)</span><br><span class="line">            cout&lt;&lt;<span class="string">&quot;*&quot;</span>;</span><br><span class="line">        cout&lt;&lt;endl;  </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//return;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="built_in">pic</span>();</span><br><span class="line">    <span class="built_in">pic</span>();</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

### 函数调用

形式：

`函数名(实在参数表)`

例：求max

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">getmax</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> z;</span><br><span class="line">    <span class="keyword">if</span>(x&gt;y)</span><br><span class="line">        z=x;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        z=y;</span><br><span class="line">    <span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> a,b,c,m,n;</span><br><span class="line">    cin&gt;&gt;a,b,c;</span><br><span class="line">    m=<span class="built_in">getmax</span>(a,b);</span><br><span class="line">    n=<span class="built_in">getmax</span>(c,m);</span><br><span class="line">    cout&lt;&lt;n&lt;&lt;endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

说明：

*   实参（实在参数）与函数定义时形参的个数、类型、次序要一一对应。
    
*   函数调用形式：
    
    *   出线在表达式中：
    
    <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">m=<span class="built_in">getmax</span>(a,b);</span><br><span class="line"><span class="comment">//有返回值；</span></span><br></pre></td></tr></table></figure>
    
    *   语句：
    
    <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">pic</span>();</span><br><span class="line"><span class="comment">//无返回值</span></span><br></pre></td></tr></table></figure>
    

#### **函数调用与返回过程**

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">getmax</span><span class="params">(<span class="type">int</span> x,<span class="type">int</span> y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> z;</span><br><span class="line">    <span class="keyword">if</span>(x&gt;y)</span><br><span class="line">        z=x;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        z=y;</span><br><span class="line">    <span class="keyword">return</span> z;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    m=<span class="built_in">getmax</span>(a,b);</span><br><span class="line">    <span class="comment">//实参a,b传入形参x,y</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

#### **函数的嵌套调用**

例：求正整数m,n的最大公约数和最小公倍数。

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//最大公约数</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">gcd</span><span class="params">(<span class="type">int</span> m,<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(<span class="type">int</span> r=m%n)</span><br><span class="line">    &#123;m=n;n=r;&#125;</span><br><span class="line">    <span class="keyword">return</span>(n);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//最小公倍数</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">sct</span><span class="params">(<span class="type">int</span> m,<span class="type">int</span> n)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span>(m*n/<span class="built_in">gcd</span>(m,n);)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

注：

在函数调用过程中，如果函数funA调用了函数funB，函数funB又调用了函数funA，这称为函数的间接递归调用。

#### 函数说明

函数的调用在前，定义在后时，则必须对函数进行说明，形式：

`函数类型 函数名(形式参数类型表);`

注意：

*   函数说明和所定义函数的函数在**返回类型**、**函数名**、**参数类型**和**个数**必须完全一致；
    
*   函数说明中的参数名可以缺省（只给出形参的个数和类型），也可以与函数定义中的参数名不同。
    
    如：
    
    `int max(int, int)`
    
    ==可能考改错题！==
    

### 例

1.  若有以下函数调用语句：`fun(a+b,(x,y),fun(n+k,d,(a,b)));`在此函数调用语句中实参的个数是：

3个

## 8.3 函数间参数传递

参数传递方式：

*   传值参数
*   传址参数
*   引用参数

### 先导：实参和形参

实参（主调）、形参（被调）

实参有存储空间，形参的的空间在函数被调时分配，可能是传数据过来（得到值，对实参无影响），也可能是传地址（到地址里干活，实参就变了）。

### 传值参数

*   形参是基本数据类型的变量

#### 实参与形参结合过程

*   函数调用时，系统为形参分配新存储单元，并将实参的值赋给相应的形参；
*   通过对形参的操作完成函数体，被调函数的操作都在形参的存储单元中进行，与实参无关；
*   释放形参所占用的存储单元，返回主调函数。

例：交换两个整数的值

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> temp;</span><br><span class="line">    temp=a;a=b;b=temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> x,y;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;请输入x,y&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cin&gt;&gt;x&gt;&gt;y;</span><br><span class="line">    <span class="built_in">swap</span>(x,y); <span class="comment">//实参可以是常量、变量、表达式</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;换后x=&quot;</span>&lt;&lt;x&lt;&lt;<span class="string">&quot;y=&quot;</span>&lt;&lt;y&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//输出的x,y并没有交换，怎么会是呢？</span></span><br></pre></td></tr></table></figure>

**分析：**

`swap()`对形参`a,b`操作，对实参`x,y`无影响。

#### 传值参数传递特点

参数值从实参向形参单向传递，函数中形参值的改变，对实参值无影响。

### 引用参数

#### 引用的概念

*   引用：一种特殊类型的变量，可认为是另一变量的别名。
    
    *   例：`int x=3,&amp;a=x;`
    
    a是x的引用
    
*   若a是x的引用，**a和x使用同一内存单元，是同一变量的两个名字**，a变则x变，x变则a变。
    

#### 引用参数作函数参数

*   形参是引用，形参和实参使用相同的内容单元

例：（修改前例）

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> &amp;a,<span class="type">int</span> &amp;b)</span><span class="comment">//形参定义为引用参数(引用变量)</span></span></span><br><span class="line"><span class="function">    <span class="comment">//&amp;是引用声明符</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> temp;</span><br><span class="line">    temp=a;a=b;b=temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> x,y;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;请输入x,y&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cin&gt;&gt;x&gt;&gt;y;</span><br><span class="line">    <span class="built_in">swap</span>(x,y); <span class="comment">//形参引用时，实参只能为变量名，不能为常量或表达式</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;换后x=&quot;</span>&lt;&lt;x&lt;&lt;<span class="string">&quot;y=&quot;</span>&lt;&lt;y&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//成功力！</span></span><br></pre></td></tr></table></figure>

**分析：**

`swap()`对**形参**`a,b`操作，等价于对**实参**`x,y`操作。

#### 例1

编一函数，判别一个自然数是否是降序数，同时求出该数各位数之和并加以调用，若是降序数输出“ yes”，否则输出“ no”。

例如： 3、 441、 531 是降序数，而 412 不是降序数。

**分析：**

*   函数如何返回两个值给主函数？
    
    *   是否为降序数return返回；
    *   各位数上的和借助引用参数。
*   如何判断自然数n是否为降序数？
    
    *   取该数相邻两位比较
    
    <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">bool</span> flag=<span class="number">1</span>;<span class="comment">//假定x是降序数</span></span><br><span class="line"><span class="keyword">while</span>(n&gt;=<span class="number">10</span>&amp;&amp;flag)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span>(n/<span class="number">10</span>%<span class="number">10</span></span><br></pre></td></tr></table></figure>
    
    ``
    
    函数：（修改前例）
    
    <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">bool</span> <span class="title">drop</span><span class="params">(<span class="type">int</span> n,<span class="type">int</span> &amp;sum)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> x=n;</span><br><span class="line">  <span class="type">bool</span> flag=<span class="number">1</span>;<span class="comment">//判断是否为降序数</span></span><br><span class="line">  <span class="keyword">while</span>(n&gt;=<span class="number">10</span>&amp;&amp;flag)</span><br><span class="line">  &#123;</span><br><span class="line">      <span class="keyword">if</span>(n/<span class="number">10</span>%<span class="number">10</span></span><br></pre></td></tr></table></figure>
    
    `
    
    <figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="type">int</span> m,sum1=<span class="number">0</span>;  <span class="comment">//实参</span></span><br><span class="line">  cin&gt;&gt;m;</span><br><span class="line">  <span class="keyword">if</span>(<span class="built_in">drop</span>(m,sum1)) <span class="comment">//flag==1</span></span><br><span class="line">      cout&lt;</span><br></pre></td></tr></table></figure>
    
    ` ``

````` ```` ``

### 形参是指针变量

修改前例

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> *a,<span class="type">int</span> *b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> temp;</span><br><span class="line">    temp=a;a=b;b=temp;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> x,y;</span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;请输入x,y&quot;</span>&lt;&lt;endl;</span><br><span class="line">    cin&gt;&gt;x&gt;&gt;y;</span><br><span class="line">    <span class="built_in">swap</span>(&amp;x,&amp;y); <span class="comment">//这里传的都是地址</span></span><br><span class="line">    <span class="comment">//形参是指针变量时，实参可以为变量地址、指针变量或数组名</span></span><br><span class="line">    cout&lt;&lt;<span class="string">&quot;换后x=&quot;</span>&lt;&lt;x&lt;&lt;<span class="string">&quot;y=&quot;</span>&lt;&lt;y&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

#### 指针参数传递特点

*   形参中存放实参内存单元的地址
*   改变形参指向的内存单元的内容就是改变实参的值
*   不能在函数内对指针变量`*x++`等，需要令`p++`，再令`*x=p`。

对比：

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> *a,<span class="type">int</span>*b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> temp;</span><br><span class="line">    temp=*a;*a=*b;*b=temp;</span><br><span class="line">&#125;   <span class="comment">//将形参a,b内存的地址内的东西交换，实参也交换。</span></span><br><span class="line"><span class="comment">//or:</span></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">swap</span><span class="params">(<span class="type">int</span> *a,<span class="type">int</span> *b)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> *temp;</span><br><span class="line">    temp=a;a=b;b=temp;</span><br><span class="line">&#125;  <span class="comment">//交换的是形参a,b（指针）内的值，从a里存x的值b里存y的值，变成a里存y的值b里存x的值</span></span><br></pre></td></tr></table></figure>

第一段ok:把实参 a 和 b 变量的地址传递给形参指针 x 和 y， 在被调函数内通过交换 x 和 y 所指向的内存单元的内容间接交换了 a 和b 的值 。

第二段no:只有对形参指针变量所指的内容进行修改，对应的实参值才会随之改变。

&gt; 要看交换的是什么，是形参的值（实参值跟着变）还是形参本身（地址换一换）？

#### 例2

随机生成10个1~100数放在一维数组中，求其平均值及最大元素值，并在主函数中显示结果。

**分析：**

*   如何把数组传递给函数用于计算
    *   传递数组的首地址，对应的形参为指针变量
*   如何传回二值
    *   指针参数/引用参数

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun</span><span class="params">(<span class="type">float</span> *p,<span class="type">float</span> *p1,<span class="type">float</span> *p2)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">float</span> sum,max;</span><br><span class="line">    sum=max=*p++;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(max&gt;*p)</span><br><span class="line">            max=*p;</span><br><span class="line">        sum+=*p;</span><br><span class="line">        p++;</span><br><span class="line">    &#125;</span><br><span class="line">    *p1=sum/N;</span><br><span class="line">    *p2=max;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//main调用</span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">float</span> a[<span class="number">10</span>],aver,max1,x;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;N;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">srand</span>(<span class="built_in">time</span>(<span class="literal">NULL</span>));</span><br><span class="line">        x=<span class="built_in">rand</span>()%<span class="number">100</span><span class="number">+1</span>;</span><br><span class="line">        a[i]=x;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fun</span>(a,&amp;aver,&amp;max1);</span><br><span class="line">    cout&lt;&lt;aver&lt;&lt;max1&lt;&lt;endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

*   无法传回多个值的解决方法：如上例，用void函数带指针变量&amp;aver等，在函数内修改形参指向的内容。

### 指针参数作实参

e.g.

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> *a,*b;</span><br><span class="line">    b=<span class="keyword">new</span> <span class="type">char</span>[<span class="number">20</span>]; </span><br><span class="line">    a=<span class="keyword">new</span> <span class="type">char</span>[<span class="number">20</span>];</span><br><span class="line">    cin&gt;&gt;a&gt;&gt;b;</span><br><span class="line">    <span class="built_in">copy_string</span>(a,b);</span><br><span class="line">    cout&lt;&lt;a&lt;&lt; b&lt;&lt;endl;</span><br><span class="line">    <span class="keyword">delete</span> []a; </span><br><span class="line">    <span class="keyword">delete</span> []b;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

### 例：打印万年历

**自顶向下逐步求精**的设计思想

*   年历分解为月历
*   月历=月头+1日打印位置+月总天数+周六换行
    *   1日打印位置
    *   闰年判别
    *   月总天数
    *   计算每月1日与1900.1.1间差距天数。`d%7=0~6`，分别代表周一~周日

![image-20231026105258695](img/image-20231026105258695.png)

方法：从问题的总体目标开始，忽略底层细节，构造底层结构，再不断分解、细化。

## 8.4 数组名作函数参数

形参为数组名，实参可以是**数组名**或指针变量。

数组作为函数的参数时，系统为形参数组和实参数组分配相同的存储单元。

&gt; 一维数组作参数传递时，只用数组名。
&gt; 
&gt; 数组长度用#define N 10或者const N=10解决

### 例

#### 1

编写函数 sort，对包含 n 个元素的整型数组 x 进行递减排序。

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="type">void</span> <span class="title">sort</span><span class="params">(<span class="type">int</span> a[],<span class="type">int</span> n)</span><span class="comment">//元素个数n需要手动输入</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i,j,k,w;</span><br><span class="line">    <span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;n<span class="number">-1</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        k=i;</span><br><span class="line">        <span class="keyword">for</span>(j=i<span class="number">+1</span>;j&lt;n;j++)</span><br><span class="line">            <span class="keyword">if</span>(a[k]&lt;a[j])</span><br><span class="line">                k=j;</span><br><span class="line">        <span class="keyword">if</span>(i!=k)</span><br><span class="line">        &#123;</span><br><span class="line">            w=a[i];</span><br><span class="line">            a[i]=a[k];</span><br><span class="line">            a[k]=w;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

注：

*   形参写法：
    
    *   `类型 形参数组名[]`
    
    `void sort(int a[])`
    
*   数值型数组，数组中元素数n一般作参数，传给形参
    

**调用**

*   实参写法：
    
    *   `实参数组名`
    
    `sort(a,10)`
    

#### 2

数字：4bytes，256~65536

字符串：n+1个字节

## 8.5 参数缺省

默认值参数必须从最右边开始，不能跳过最后一个让倒二取默认值。

**1、**要求赋予默认值的参数必须放在形参表列中的最右端。如：

​ void fun(int i, int j, int k, int m=3,int n=4);

**2**、若参数在函数说明中已设置缺省值，则在函数定义中不能重复设置

**3**、实参个数至少要等于没有提供默认值的形参个数

**假设函数调用语句为：**

​ **fun(1,2);** //错误，至少应有三个实参

​ **fun(10,20,30);** //正确，m、n取默认值

​ **fun(10,20,30,40);** //正确，m取40、n取默认值4

​ **fun(10,20,30, ,50);** //错误，只能从左至右匹配

## 8.6 函数重载

允许函数同名。

*   **参数类型不同的重载函数**

e.g. int, long, float类型各自的abs()

*   **参数个数不同的重载函数**

e.g. 2，3，4个数的min()

## 作业题

### 1

编一判断m是否为素数的函数，并在主函数中利用它输出十对最小的孪生素数。所谓孪生素数是指两个相差为2的素数，如3和5，11和13。程序运行结果见下图。

函数形式为：

`bool isprime(int m)`

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">bool</span> <span class="title">isprime</span><span class="params">(<span class="type">int</span> m)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="type">bool</span> flag = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">2</span>; ; i++)</span><br><span class="line">        <span class="keyword">if</span> (m % i == <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">if</span> (i == m)</span><br><span class="line">        flag= <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> m=<span class="number">2</span>, s = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> (s &lt; <span class="number">10</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">isprime</span>(m) &amp;&amp; <span class="built_in">isprime</span>(m + <span class="number">2</span>))</span><br><span class="line">        &#123;</span><br><span class="line">            cout &lt;&lt; <span class="string">&quot;&lt;&quot;</span> &lt;&lt; m &lt;&lt; <span class="string">&quot;,&quot;</span> &lt;&lt; m + <span class="number">2</span> &lt;&lt; <span class="string">&quot;&gt;&quot;</span> &lt;&lt; endl;</span><br><span class="line">            s++;</span><br><span class="line">        &#125;</span><br><span class="line">        m++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

### 2

编一函数，功能为判断一字符串是否为回文，如果是回文则返回1，否则返回0。回文是指顺读和倒读都一样的字符串，如“deed”和“level”是回文。在主函数中对输入的字符串加以调用。

函数形式为：`int huiwen(char s[])`

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 100</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">huiwen</span><span class="params">(<span class="type">char</span> s[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i,m;</span><br><span class="line">    m = <span class="built_in">strlen</span>(s);</span><br><span class="line">    <span class="type">bool</span> flag = <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt;= (m - <span class="number">1</span>) / <span class="number">2</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] != s[m - <span class="number">1</span> - i])</span><br><span class="line">        &#123;</span><br><span class="line">            flag = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> s[N];</span><br><span class="line">    <span class="built_in">gets_s</span>(s);</span><br><span class="line">    <span class="type">int</span> flag;</span><br><span class="line">    flag = <span class="built_in">huiwen</span>(s);</span><br><span class="line">    cout &lt;&lt; flag &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

### 3

函数的功能是将学生成绩从高分到低分排序，并统计优秀与不及格的人数。用下面两种方法实现：

（1）函数形式为：int fun1(int s[],int n,int *x)

要求优秀人数通过return返回，不及格人数通过指针参数返回结果。

（2）函数形式为：void fun2(int s[],int n,int &amp;x,int &amp;y)

要求优秀与不及格的人数通过引用参数返回结果。

分别编二个函数，学生人数从键盘输入。

函数一：

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 100</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">fun1</span><span class="params">(<span class="type">int</span> s[], <span class="type">int</span> n, <span class="type">int</span> *x)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i,j,k,t,r=<span class="number">0</span>,p=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n<span class="number">-1</span> ; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        k = i;</span><br><span class="line">        <span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt; n; j++)</span><br><span class="line">            <span class="keyword">if</span> (s[k] &lt; s[j])</span><br><span class="line">                k = j;</span><br><span class="line">        <span class="keyword">if</span> (i != k)</span><br><span class="line">        &#123;</span><br><span class="line">            t = s[i];</span><br><span class="line">            s[i] = s[k];</span><br><span class="line">            s[k] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] &gt;= <span class="number">90</span>)</span><br><span class="line">            r++;</span><br><span class="line">        <span class="keyword">if</span> (s[i] &lt; <span class="number">60</span>)</span><br><span class="line">            p++;</span><br><span class="line">    &#125;</span><br><span class="line">    *x = p;</span><br><span class="line">    <span class="keyword">return</span> r;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> s[N];</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;输入学生人数：&quot;</span>;</span><br><span class="line">    <span class="type">int</span> n,i, num=<span class="number">0</span>;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;输入学生成绩（满分100）：&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; s[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fun1</span>(s, n, &amp;num);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;优秀人数为&quot;</span> &lt;&lt; <span class="built_in">fun1</span>(s, n, &amp;num) &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;不及格人数为&quot;</span> &lt;&lt; num &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;从高到低排序成绩：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; s[i]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

函数二：

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 100</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">fun2</span><span class="params">(<span class="type">int</span> s[], <span class="type">int</span> n, <span class="type">int</span>&amp; x, <span class="type">int</span>&amp; y)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> i, j, k, t, r = <span class="number">0</span>, p = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n - <span class="number">1</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        k = i;</span><br><span class="line">        <span class="keyword">for</span> (j = i + <span class="number">1</span>; j &lt; n; j++)</span><br><span class="line">            <span class="keyword">if</span> (s[k] &lt; s[j])</span><br><span class="line">                k = j;</span><br><span class="line">        <span class="keyword">if</span> (i != k)</span><br><span class="line">        &#123;</span><br><span class="line">            t = s[i];</span><br><span class="line">            s[i] = s[k];</span><br><span class="line">            s[k] = t;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (s[i] &gt;= <span class="number">90</span>)</span><br><span class="line">            r++;</span><br><span class="line">        <span class="keyword">if</span> (s[i] &lt; <span class="number">60</span>)</span><br><span class="line">            p++;</span><br><span class="line">    &#125;</span><br><span class="line">    x = r; y = p;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> s[N];</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;输入学生人数：&quot;</span>;</span><br><span class="line">    <span class="type">int</span> n,i, x, y;</span><br><span class="line">    cin &gt;&gt; n;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;输入学生成绩（满分100）：&quot;</span>;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cin &gt;&gt; s[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">fun2</span>(s, n, x,y);</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;优秀人数为&quot;</span> &lt;&lt; x &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;不及格人数为&quot;</span> &lt;&lt; y &lt;&lt; endl;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;从高到低排序成绩：&quot;</span> &lt;&lt; endl;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        cout &lt;&lt; s[i]&lt;&lt;<span class="string">&#x27; &#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

### 4

编一函数，功能为统计字符串中各个字母（不区分大、小写）出现的频率，同时找出频率出现最高的字母及次数，假设出现次数最多的字母只有一个。函数形式为：

void freq(char s[],int p[],char &amp;chmax,int &amp;max)

程序运行结果如下：

![image-20231027162507116](img/image-20231027162507116.png)

<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;iostream&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> N 256</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">void</span> <span class="title">freq</span><span class="params">(<span class="type">char</span> s[], <span class="type">int</span> p[], <span class="type">char</span>&amp; chmax, <span class="type">int</span>&amp; max)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> *a = s;</span><br><span class="line">    <span class="keyword">while</span>(*a)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (*a &gt; <span class="string">&#x27;a&#x27;</span> &amp;&amp; *a &lt; <span class="string">&#x27;z&#x27;</span>  *a&gt;<span class="string">&#x27;A&#x27;</span> &amp;&amp; *a &lt; <span class="string">&#x27;Z&#x27;</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span> (*a &lt; <span class="string">&#x27;a&#x27;</span>)</span><br><span class="line">                p[*a + <span class="number">32</span>]++;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">                p[*a]++;</span><br><span class="line">            <span class="keyword">if</span> (p[*a] &gt; max)</span><br><span class="line">            &#123;</span><br><span class="line">                max = p[*a];</span><br><span class="line">                chmax = *a;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        a++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">char</span> s[N] = <span class="string">&quot;&quot;</span> ;</span><br><span class="line">    <span class="type">char</span> chmax ;</span><br><span class="line">    <span class="type">int</span> p[N]=&#123;&#125;, max=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">gets_s</span>(s);</span><br><span class="line">    <span class="built_in">freq</span>(s, p, chmax, max);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; N; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (p[i])</span><br><span class="line">            cout &lt;&lt; <span class="built_in">char</span>(i) &lt;&lt; <span class="string">&quot;----&quot;</span> &lt;&lt; p[i] &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; <span class="string">&quot;出现频率最高的字母：&quot;</span> &lt;&lt; chmax &lt;&lt; <span class="string">&quot;----&quot;</span> &lt;&lt; max &lt;&lt; endl;</span><br><span class="line">    <span class="built_in">system</span>(<span class="string">&quot;pause&quot;</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

`` ```` ````` ``````
</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/02/05/%E7%AC%AC%E5%85%AB%E8%AE%B2-%E5%87%BD%E6%95%B0/" data-id="cm1hr2hq60075dwue3lug7d4s" data-title="第八讲 函数" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/c-c/" rel="tag">c&#x2F;c++</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/6/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><a class="page-number" href="/page/10/">10</a><a class="extend next" rel="next" href="/page/8/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/notebook/">notebook</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/notebook/C-C/">C/C++</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/notebook/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/">博客搭建</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/notebook/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/notebook/%E6%9D%82%E9%A1%B9/">杂项</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/notebook/%E6%9D%90%E7%A7%91%E5%9F%BA%E7%9B%B8%E5%85%B3/">材科基相关</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/notebook/%E7%89%A9%E7%90%86%E5%8C%96%E5%AD%A6/">物理化学</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/notebook/%E7%94%B5%E5%B7%A5%E5%AD%A6/">电工学</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/notebook/%E9%80%89%E4%BF%AE%E8%AF%BE/">选修课</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/project/">project</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/project/%E5%8F%8D%E8%89%B2%E6%97%B6%E4%BB%A3/">反色时代</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/uncategorized/">uncategorized</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E6%82%A6%E4%B9%90/">悦乐</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%AC%94%E8%AE%B0%E6%9C%AC/">笔记本</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E7%B3%BB%E5%88%97/">系列</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E8%AF%BB%E7%BD%A2%E6%9C%89%E6%84%9F/">读罢有感</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/3B1B/" rel="tag">3B1B</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/6/" rel="tag">6</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NN/" rel="tag">NN</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RSS/" rel="tag">RSS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/adobe/" rel="tag">adobe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/blog/" rel="tag">blog</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c-c/" rel="tag">c&#x2F;c++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/github/" rel="tag">github</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/matlab/" rel="tag">matlab</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/microsoft/" rel="tag">microsoft</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/" rel="tag">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ssh/" rel="tag">ssh</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tips/" rel="tag">tips</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/wordpress/" rel="tag">wordpress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/zotero/" rel="tag">zotero</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B8%8A%E6%B5%B7/" rel="tag">上海</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%90/" rel="tag">乐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%B9%A6/" rel="tag">书</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E6%96%87/" rel="tag">人文</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%BA%E6%B0%91/" rel="tag">人民</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" rel="tag">博客搭建</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%93%B2%E5%AD%A6/" rel="tag">哲学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9B%BA%E4%BD%93%E7%89%A9%E7%90%86/" rel="tag">固体物理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9C%9F%E6%9C%A8%E5%B7%A5%E7%A8%8B%E6%9D%90%E6%96%99/" rel="tag">土木工程材料</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9C%B0%E7%90%86/" rel="tag">地理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%9C%B0%E8%B4%A8%E5%AD%A6/" rel="tag">地质学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A5%87%E8%B0%AD/" rel="tag">奇谭</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AE%89%E8%A3%85/" rel="tag">安装</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%AF%B9%E8%AF%9D/" rel="tag">对话</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%B9%BB%E6%83%B3/" rel="tag">幻想</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%95%88%E7%8E%87/" rel="tag">效率</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E5%8C%96/" rel="tag">文化</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%96%87%E5%AD%A6/" rel="tag">文学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%85%E6%B8%B8/" rel="tag">旅游</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%85%E6%B8%B8%E5%9C%B0%E8%B4%A8%E5%AD%A6/" rel="tag">旅游地质学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E8%AE%B0/" rel="tag">日记</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%99%AE%E5%B8%8C%E9%87%91/" rel="tag">普希金</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%99%B6%E4%BD%93/" rel="tag">晶体</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" rel="tag">机器学习</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B0%91%E6%97%8F/" rel="tag">民族</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B7%B7%E5%87%9D%E5%9C%9F/" rel="tag">混凝土</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%B8%B8%E6%88%8F/" rel="tag">游戏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BE%A1%E5%A0%82%E5%93%B2%E5%AD%A6/" rel="tag">澡堂哲学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%81%B5%E9%AD%82/" rel="tag">灵魂</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%89%A9%E7%90%86%E5%8C%96%E5%AD%A6/" rel="tag">物理化学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%89%E7%9F%B3/" rel="tag">玉石</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8E%8B%E5%BE%B7%E5%B3%B0/" rel="tag">王德峰</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8F%A0%E5%AE%9D%E8%B4%AD%E4%B9%B0/" rel="tag">珠宝购买</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%8F%A0%E5%AE%9D%E9%89%B4%E8%B5%8F/" rel="tag">珠宝鉴赏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%B5%E5%B7%A5%E5%AD%A6/" rel="tag">电工学</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%94%B5%E5%BD%B1/" rel="tag">电影</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BB%8F%E9%AA%8C/" rel="tag">经验</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BD%91%E8%AF%BE/" rel="tag">网课</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BF%BB%E8%AF%91/" rel="tag">翻译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%97%E6%AD%8C/" rel="tag">诗歌</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%AD%E9%9F%B3%E8%BD%AC%E6%96%87%E5%AD%97/" rel="tag">语音转文字</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AF%BE%E5%A0%82%E6%B4%BE/" rel="tag">课堂派</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%B5%84%E6%96%99/" rel="tag">资料</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BD%AF%E4%BB%B6/" rel="tag">软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%9C%E7%BB%AA/" rel="tag">远绪</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%BF%B7%E5%A4%B1%E4%B8%9C%E4%BA%AC/" rel="tag">迷失东京</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%81%93/" rel="tag">道</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%97%AE%E9%A2%98/" rel="tag">问题</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9F%B3%E4%B9%90/" rel="tag">音乐</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%A3%9E%E4%B9%A6%E5%A6%99%E8%AE%B0/" rel="tag">飞书妙记</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/3B1B/" style="font-size: 10px;">3B1B</a> <a href="/tags/6/" style="font-size: 10px;">6</a> <a href="/tags/NN/" style="font-size: 10px;">NN</a> <a href="/tags/RSS/" style="font-size: 10px;">RSS</a> <a href="/tags/adobe/" style="font-size: 12.5px;">adobe</a> <a href="/tags/blog/" style="font-size: 10px;">blog</a> <a href="/tags/c-c/" style="font-size: 20px;">c/c++</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/matlab/" style="font-size: 10px;">matlab</a> <a href="/tags/microsoft/" style="font-size: 10px;">microsoft</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/ssh/" style="font-size: 10px;">ssh</a> <a href="/tags/tips/" style="font-size: 10px;">tips</a> <a href="/tags/wordpress/" style="font-size: 12.5px;">wordpress</a> <a href="/tags/zotero/" style="font-size: 10px;">zotero</a> <a href="/tags/%E4%B8%8A%E6%B5%B7/" style="font-size: 10px;">上海</a> <a href="/tags/%E4%B9%90/" style="font-size: 10px;">乐</a> <a href="/tags/%E4%B9%A6/" style="font-size: 15px;">书</a> <a href="/tags/%E4%BA%BA%E6%96%87/" style="font-size: 10px;">人文</a> <a href="/tags/%E4%BA%BA%E6%B0%91/" style="font-size: 10px;">人民</a> <a href="/tags/%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA/" style="font-size: 12.5px;">博客搭建</a> <a href="/tags/%E5%93%B2%E5%AD%A6/" style="font-size: 10px;">哲学</a> <a href="/tags/%E5%9B%BA%E4%BD%93%E7%89%A9%E7%90%86/" style="font-size: 10px;">固体物理</a> <a href="/tags/%E5%9C%9F%E6%9C%A8%E5%B7%A5%E7%A8%8B%E6%9D%90%E6%96%99/" style="font-size: 10px;">土木工程材料</a> <a href="/tags/%E5%9C%B0%E7%90%86/" style="font-size: 10px;">地理</a> <a href="/tags/%E5%9C%B0%E8%B4%A8%E5%AD%A6/" style="font-size: 10px;">地质学</a> <a href="/tags/%E5%A5%87%E8%B0%AD/" style="font-size: 10px;">奇谭</a> <a href="/tags/%E5%AE%89%E8%A3%85/" style="font-size: 10px;">安装</a> <a href="/tags/%E5%AF%B9%E8%AF%9D/" style="font-size: 10px;">对话</a> <a href="/tags/%E5%B9%BB%E6%83%B3/" style="font-size: 10px;">幻想</a> <a href="/tags/%E6%95%88%E7%8E%87/" style="font-size: 10px;">效率</a> <a href="/tags/%E6%96%87%E5%8C%96/" style="font-size: 10px;">文化</a> <a href="/tags/%E6%96%87%E5%AD%A6/" style="font-size: 10px;">文学</a> <a href="/tags/%E6%97%85%E6%B8%B8/" style="font-size: 10px;">旅游</a> <a href="/tags/%E6%97%85%E6%B8%B8%E5%9C%B0%E8%B4%A8%E5%AD%A6/" style="font-size: 10px;">旅游地质学</a> <a href="/tags/%E6%97%A5%E8%AE%B0/" style="font-size: 15px;">日记</a> <a href="/tags/%E6%99%AE%E5%B8%8C%E9%87%91/" style="font-size: 10px;">普希金</a> <a href="/tags/%E6%99%B6%E4%BD%93/" style="font-size: 10px;">晶体</a> <a href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/" style="font-size: 12.5px;">机器学习</a> <a href="/tags/%E6%B0%91%E6%97%8F/" style="font-size: 10px;">民族</a> <a href="/tags/%E6%B7%B7%E5%87%9D%E5%9C%9F/" style="font-size: 10px;">混凝土</a> <a href="/tags/%E6%B8%B8%E6%88%8F/" style="font-size: 10px;">游戏</a> <a href="/tags/%E6%BE%A1%E5%A0%82%E5%93%B2%E5%AD%A6/" style="font-size: 10px;">澡堂哲学</a> <a href="/tags/%E7%81%B5%E9%AD%82/" style="font-size: 10px;">灵魂</a> <a href="/tags/%E7%89%A9%E7%90%86%E5%8C%96%E5%AD%A6/" style="font-size: 10px;">物理化学</a> <a href="/tags/%E7%8E%89%E7%9F%B3/" style="font-size: 10px;">玉石</a> <a href="/tags/%E7%8E%8B%E5%BE%B7%E5%B3%B0/" style="font-size: 10px;">王德峰</a> <a href="/tags/%E7%8F%A0%E5%AE%9D%E8%B4%AD%E4%B9%B0/" style="font-size: 10px;">珠宝购买</a> <a href="/tags/%E7%8F%A0%E5%AE%9D%E9%89%B4%E8%B5%8F/" style="font-size: 17.5px;">珠宝鉴赏</a> <a href="/tags/%E7%94%B5%E5%B7%A5%E5%AD%A6/" style="font-size: 10px;">电工学</a> <a href="/tags/%E7%94%B5%E5%BD%B1/" style="font-size: 10px;">电影</a> <a href="/tags/%E7%BB%8F%E9%AA%8C/" style="font-size: 10px;">经验</a> <a href="/tags/%E7%BD%91%E8%AF%BE/" style="font-size: 10px;">网课</a> <a href="/tags/%E7%BF%BB%E8%AF%91/" style="font-size: 10px;">翻译</a> <a href="/tags/%E8%AF%97%E6%AD%8C/" style="font-size: 10px;">诗歌</a> <a href="/tags/%E8%AF%AD%E9%9F%B3%E8%BD%AC%E6%96%87%E5%AD%97/" style="font-size: 10px;">语音转文字</a> <a href="/tags/%E8%AF%BE%E5%A0%82%E6%B4%BE/" style="font-size: 10px;">课堂派</a> <a href="/tags/%E8%B5%84%E6%96%99/" style="font-size: 10px;">资料</a> <a href="/tags/%E8%BD%AF%E4%BB%B6/" style="font-size: 15px;">软件</a> <a href="/tags/%E8%BF%9C%E7%BB%AA/" style="font-size: 15px;">远绪</a> <a href="/tags/%E8%BF%B7%E5%A4%B1%E4%B8%9C%E4%BA%AC/" style="font-size: 10px;">迷失东京</a> <a href="/tags/%E9%81%93/" style="font-size: 10px;">道</a> <a href="/tags/%E9%97%AE%E9%A2%98/" style="font-size: 10px;">问题</a> <a href="/tags/%E9%9F%B3%E4%B9%90/" style="font-size: 12.5px;">音乐</a> <a href="/tags/%E9%A3%9E%E4%B9%A6%E5%A6%99%E8%AE%B0/" style="font-size: 10px;">飞书妙记</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/09/">September 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/08/">August 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">June 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/04/">April 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/03/">March 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/02/">February 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/09/25/hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2024/08/29/701/">Untitled Post - 17</a>
          </li>
        
          <li>
            <a href="/2024/08/29/%E6%89%A7%E7%AC%94%E5%A6%82%E6%89%A7%E9%95%9C%EF%BC%8C%E8%A7%82%E6%98%9F%E4%BA%A6%E8%A7%82%E5%BF%83/">执笔如执镜，观星亦观心</a>
          </li>
        
          <li>
            <a href="/2024/06/21/%E9%97%AE%E9%81%93/">问道</a>
          </li>
        
          <li>
            <a href="/2024/06/10/%E9%95%BF%E6%AD%8C%E8%A1%8C/">长歌行</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>